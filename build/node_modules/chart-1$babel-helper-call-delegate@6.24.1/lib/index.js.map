{"version":3,"sources":["index.js"],"names":["exports","__esModule","default","path","scope","arguments","length","undefined","node","container","t","functionExpression","body","generator","async","callee","args","_babelHelperHoistVariables2","id","push","state","foundThis","foundArguments","traverse","visitor","memberExpression","identifier","thisExpression","nullLiteral","call","callExpression","yieldExpression","returnStatement","_babelHelperHoistVariables","require","_interopRequireDefault","_babelTypes","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","enter","isThisExpression","isReferencedIdentifier","name","Function","skip","module"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (path) {\n  var scope = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : path.scope;\n  var node = path.node;\n\n  var container = t.functionExpression(null, [], node.body, node.generator, node.async);\n\n  var callee = container;\n  var args = [];\n\n  (0, _babelHelperHoistVariables2.default)(path, function (id) {\n    return scope.push({ id: id });\n  });\n\n  var state = {\n    foundThis: false,\n    foundArguments: false\n  };\n\n  path.traverse(visitor, state);\n\n  if (state.foundArguments) {\n    callee = t.memberExpression(container, t.identifier(\"apply\"));\n    args = [];\n\n    if (state.foundThis) {\n      args.push(t.thisExpression());\n    }\n\n    if (state.foundArguments) {\n      if (!state.foundThis) args.push(t.nullLiteral());\n      args.push(t.identifier(\"arguments\"));\n    }\n  }\n\n  var call = t.callExpression(callee, args);\n  if (node.generator) call = t.yieldExpression(call, true);\n\n  return t.returnStatement(call);\n};\n\nvar _babelHelperHoistVariables = require(\"babel-helper-hoist-variables\");\n\nvar _babelHelperHoistVariables2 = _interopRequireDefault(_babelHelperHoistVariables);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar visitor = {\n  enter: function enter(path, state) {\n    if (path.isThisExpression()) {\n      state.foundThis = true;\n    }\n\n    if (path.isReferencedIdentifier({ name: \"arguments\" })) {\n      state.foundArguments = true;\n    }\n  },\n  Function: function Function(path) {\n    path.skip();\n  }\n};\n\nmodule.exports = exports[\"default\"];"]}