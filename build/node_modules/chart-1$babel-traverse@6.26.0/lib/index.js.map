{"version":3,"sources":["index.js"],"names":["exports","__esModule","visitors","Hub","Scope","NodePath","undefined","_getIterator2","require","_getIterator3","_interopRequireDefault","_path","Object","defineProperty","enumerable","get","default","_scope","_hub","traverse","_context","_context2","_visitors","_interopRequireWildcard","_babelMessages","messages","_includes","_includes2","_babelTypes","t","_cache","cache","obj","newObj","key","prototype","hasOwnProperty","call","parent","opts","scope","state","parentPath","noScope","type","Error","explode","node","verify","cheap","enter","traverseFast","skipKeys","keys","VISITOR_KEYS","context","_iterator","_isArray","Array","isArray","_i","_ref","length","next","done","value","visit","clearNode","removeProperties","path","delete","tree","hasBlacklistedType","has","stop","hasType","blacklistTypes","blacklist","clearCache","clear","clearPath","clearScope","copyCache","source","destination","set"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.visitors = exports.Hub = exports.Scope = exports.NodePath = undefined;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _path = require(\"./path\");\n\nObject.defineProperty(exports, \"NodePath\", {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_path).default;\n  }\n});\n\nvar _scope = require(\"./scope\");\n\nObject.defineProperty(exports, \"Scope\", {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_scope).default;\n  }\n});\n\nvar _hub = require(\"./hub\");\n\nObject.defineProperty(exports, \"Hub\", {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_hub).default;\n  }\n});\nexports.default = traverse;\n\nvar _context = require(\"./context\");\n\nvar _context2 = _interopRequireDefault(_context);\n\nvar _visitors = require(\"./visitors\");\n\nvar visitors = _interopRequireWildcard(_visitors);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _includes = require(\"lodash/includes\");\n\nvar _includes2 = _interopRequireDefault(_includes);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _cache = require(\"./cache\");\n\nvar cache = _interopRequireWildcard(_cache);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.visitors = visitors;\nfunction traverse(parent, opts, scope, state, parentPath) {\n  if (!parent) return;\n  if (!opts) opts = {};\n\n  if (!opts.noScope && !scope) {\n    if (parent.type !== \"Program\" && parent.type !== \"File\") {\n      throw new Error(messages.get(\"traverseNeedsParent\", parent.type));\n    }\n  }\n\n  visitors.explode(opts);\n\n  traverse.node(parent, opts, scope, state, parentPath);\n}\n\ntraverse.visitors = visitors;\ntraverse.verify = visitors.verify;\ntraverse.explode = visitors.explode;\n\ntraverse.NodePath = require(\"./path\");\ntraverse.Scope = require(\"./scope\");\ntraverse.Hub = require(\"./hub\");\n\ntraverse.cheap = function (node, enter) {\n  return t.traverseFast(node, enter);\n};\n\ntraverse.node = function (node, opts, scope, state, parentPath, skipKeys) {\n  var keys = t.VISITOR_KEYS[node.type];\n  if (!keys) return;\n\n  var context = new _context2.default(scope, opts, state, parentPath);\n  for (var _iterator = keys, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var key = _ref;\n\n    if (skipKeys && skipKeys[key]) continue;\n    if (context.visit(node, key)) return;\n  }\n};\n\ntraverse.clearNode = function (node, opts) {\n  t.removeProperties(node, opts);\n\n  cache.path.delete(node);\n};\n\ntraverse.removeProperties = function (tree, opts) {\n  t.traverseFast(tree, traverse.clearNode, opts);\n  return tree;\n};\n\nfunction hasBlacklistedType(path, state) {\n  if (path.node.type === state.type) {\n    state.has = true;\n    path.stop();\n  }\n}\n\ntraverse.hasType = function (tree, scope, type, blacklistTypes) {\n  if ((0, _includes2.default)(blacklistTypes, tree.type)) return false;\n\n  if (tree.type === type) return true;\n\n  var state = {\n    has: false,\n    type: type\n  };\n\n  traverse(tree, {\n    blacklist: blacklistTypes,\n    enter: hasBlacklistedType\n  }, scope, state);\n\n  return state.has;\n};\n\ntraverse.clearCache = function () {\n  cache.clear();\n};\n\ntraverse.clearCache.clearPath = cache.clearPath;\ntraverse.clearCache.clearScope = cache.clearScope;\n\ntraverse.copyCache = function (source, destination) {\n  if (cache.path.has(source)) {\n    cache.path.set(destination, cache.path.get(source));\n  }\n};"]}