{"version":3,"sources":["binding.js"],"names":["exports","__esModule","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","obj","default","Binding","_ref","existing","identifier","scope","path","kind","constantViolations","constant","referencePaths","referenced","references","clearValue","concat","prototype","deoptValue","hasDeoptedValue","setValue","value","hasValue","reassign","indexOf","push","reference","dereference","module"],"mappings":"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","file":"binding.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Binding = function () {\n  function Binding(_ref) {\n    var existing = _ref.existing,\n        identifier = _ref.identifier,\n        scope = _ref.scope,\n        path = _ref.path,\n        kind = _ref.kind;\n    (0, _classCallCheck3.default)(this, Binding);\n\n    this.identifier = identifier;\n    this.scope = scope;\n    this.path = path;\n    this.kind = kind;\n\n    this.constantViolations = [];\n    this.constant = true;\n\n    this.referencePaths = [];\n    this.referenced = false;\n    this.references = 0;\n\n    this.clearValue();\n\n    if (existing) {\n      this.constantViolations = [].concat(existing.path, existing.constantViolations, this.constantViolations);\n    }\n  }\n\n  Binding.prototype.deoptValue = function deoptValue() {\n    this.clearValue();\n    this.hasDeoptedValue = true;\n  };\n\n  Binding.prototype.setValue = function setValue(value) {\n    if (this.hasDeoptedValue) return;\n    this.hasValue = true;\n    this.value = value;\n  };\n\n  Binding.prototype.clearValue = function clearValue() {\n    this.hasDeoptedValue = false;\n    this.hasValue = false;\n    this.value = null;\n  };\n\n  Binding.prototype.reassign = function reassign(path) {\n    this.constant = false;\n    if (this.constantViolations.indexOf(path) !== -1) {\n      return;\n    }\n    this.constantViolations.push(path);\n  };\n\n  Binding.prototype.reference = function reference(path) {\n    if (this.referencePaths.indexOf(path) !== -1) {\n      return;\n    }\n    this.referenced = true;\n    this.references++;\n    this.referencePaths.push(path);\n  };\n\n  Binding.prototype.dereference = function dereference() {\n    this.references--;\n    this.referenced = !!this.references;\n  };\n\n  return Binding;\n}();\n\nexports.default = Binding;\nmodule.exports = exports[\"default\"];"]}