{"version":3,"sources":["replacement.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","replaceWithMultiple","replaceWithSourceString","replaceWith","_replaceWith","replaceExpressionWithStatements","replaceInline","_babelCodeFrame","_babelCodeFrame2","_index","_index2","_index3","_index4","_babylon","_babelTypes","t","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","hoistVariablesVisitor","Function","path","skip","VariableDeclaration","node","kind","bindings","getBindingIdentifiers","scope","push","id","exprs","_iterator","declarations","_isArray","Array","isArray","_i","_ref","length","next","done","value","declar","init","expressionStatement","assignmentExpression","nodes","resync","_verifyNodeList","inheritLeadingComments","inheritTrailingComments","container","insertAfter","requeue","remove","replacement","parse","err","loc","message","line","column","program","body","expression","removeProperties","removed","Error","isProgram","isNodeType","isExpression","canHaveVariableDeclarationOrExpression","canSwapBetweenExpressionAndStatement","parentPath","isExportDefaultDeclaration","isStatement","oldNode","inheritsComments","removeComments","type","setScope","ReferenceError","inList","validate","parent","debug","toSequenceExpression","isSequenceExpression","expressions","isExpressionStatement","_maybePopFromStatements","functionExpression","blockStatement","shadow","callExpression","traverse","completionRecords","get","getCompletionRecords","_iterator2","_isArray2","_i2","_ref2","loop","findParent","isLoop","uid","getData","callee","generateDeclaredUidIdentifier","pushContainer","returnStatement","setData","identifier","name","_containerInsertAfter"],"mappings":"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","file":"replacement.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.replaceWithMultiple = replaceWithMultiple;\nexports.replaceWithSourceString = replaceWithSourceString;\nexports.replaceWith = replaceWith;\nexports._replaceWith = _replaceWith;\nexports.replaceExpressionWithStatements = replaceExpressionWithStatements;\nexports.replaceInline = replaceInline;\n\nvar _babelCodeFrame = require(\"babel-code-frame\");\n\nvar _babelCodeFrame2 = _interopRequireDefault(_babelCodeFrame);\n\nvar _index = require(\"../index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = require(\"./index\");\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _babylon = require(\"babylon\");\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar hoistVariablesVisitor = {\n  Function: function Function(path) {\n    path.skip();\n  },\n  VariableDeclaration: function VariableDeclaration(path) {\n    if (path.node.kind !== \"var\") return;\n\n    var bindings = path.getBindingIdentifiers();\n    for (var key in bindings) {\n      path.scope.push({ id: bindings[key] });\n    }\n\n    var exprs = [];\n\n    for (var _iterator = path.node.declarations, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var declar = _ref;\n\n      if (declar.init) {\n        exprs.push(t.expressionStatement(t.assignmentExpression(\"=\", declar.id, declar.init)));\n      }\n    }\n\n    path.replaceWithMultiple(exprs);\n  }\n};\n\nfunction replaceWithMultiple(nodes) {\n  this.resync();\n\n  nodes = this._verifyNodeList(nodes);\n  t.inheritLeadingComments(nodes[0], this.node);\n  t.inheritTrailingComments(nodes[nodes.length - 1], this.node);\n  this.node = this.container[this.key] = null;\n  this.insertAfter(nodes);\n\n  if (this.node) {\n    this.requeue();\n  } else {\n    this.remove();\n  }\n}\n\nfunction replaceWithSourceString(replacement) {\n  this.resync();\n\n  try {\n    replacement = \"(\" + replacement + \")\";\n    replacement = (0, _babylon.parse)(replacement);\n  } catch (err) {\n    var loc = err.loc;\n    if (loc) {\n      err.message += \" - make sure this is an expression.\";\n      err.message += \"\\n\" + (0, _babelCodeFrame2.default)(replacement, loc.line, loc.column + 1);\n    }\n    throw err;\n  }\n\n  replacement = replacement.program.body[0].expression;\n  _index2.default.removeProperties(replacement);\n  return this.replaceWith(replacement);\n}\n\nfunction replaceWith(replacement) {\n  this.resync();\n\n  if (this.removed) {\n    throw new Error(\"You can't replace this node, we've already removed it\");\n  }\n\n  if (replacement instanceof _index4.default) {\n    replacement = replacement.node;\n  }\n\n  if (!replacement) {\n    throw new Error(\"You passed `path.replaceWith()` a falsy node, use `path.remove()` instead\");\n  }\n\n  if (this.node === replacement) {\n    return;\n  }\n\n  if (this.isProgram() && !t.isProgram(replacement)) {\n    throw new Error(\"You can only replace a Program root node with another Program node\");\n  }\n\n  if (Array.isArray(replacement)) {\n    throw new Error(\"Don't use `path.replaceWith()` with an array of nodes, use `path.replaceWithMultiple()`\");\n  }\n\n  if (typeof replacement === \"string\") {\n    throw new Error(\"Don't use `path.replaceWith()` with a source string, use `path.replaceWithSourceString()`\");\n  }\n\n  if (this.isNodeType(\"Statement\") && t.isExpression(replacement)) {\n    if (!this.canHaveVariableDeclarationOrExpression() && !this.canSwapBetweenExpressionAndStatement(replacement) && !this.parentPath.isExportDefaultDeclaration()) {\n      replacement = t.expressionStatement(replacement);\n    }\n  }\n\n  if (this.isNodeType(\"Expression\") && t.isStatement(replacement)) {\n    if (!this.canHaveVariableDeclarationOrExpression() && !this.canSwapBetweenExpressionAndStatement(replacement)) {\n      return this.replaceExpressionWithStatements([replacement]);\n    }\n  }\n\n  var oldNode = this.node;\n  if (oldNode) {\n    t.inheritsComments(replacement, oldNode);\n    t.removeComments(oldNode);\n  }\n\n  this._replaceWith(replacement);\n  this.type = replacement.type;\n\n  this.setScope();\n\n  this.requeue();\n}\n\nfunction _replaceWith(node) {\n  if (!this.container) {\n    throw new ReferenceError(\"Container is falsy\");\n  }\n\n  if (this.inList) {\n    t.validate(this.parent, this.key, [node]);\n  } else {\n    t.validate(this.parent, this.key, node);\n  }\n\n  this.debug(function () {\n    return \"Replace with \" + (node && node.type);\n  });\n\n  this.node = this.container[this.key] = node;\n}\n\nfunction replaceExpressionWithStatements(nodes) {\n  this.resync();\n\n  var toSequenceExpression = t.toSequenceExpression(nodes, this.scope);\n\n  if (t.isSequenceExpression(toSequenceExpression)) {\n    var exprs = toSequenceExpression.expressions;\n\n    if (exprs.length >= 2 && this.parentPath.isExpressionStatement()) {\n      this._maybePopFromStatements(exprs);\n    }\n\n    if (exprs.length === 1) {\n      this.replaceWith(exprs[0]);\n    } else {\n      this.replaceWith(toSequenceExpression);\n    }\n  } else if (toSequenceExpression) {\n    this.replaceWith(toSequenceExpression);\n  } else {\n    var container = t.functionExpression(null, [], t.blockStatement(nodes));\n    container.shadow = true;\n\n    this.replaceWith(t.callExpression(container, []));\n    this.traverse(hoistVariablesVisitor);\n\n    var completionRecords = this.get(\"callee\").getCompletionRecords();\n    for (var _iterator2 = completionRecords, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var path = _ref2;\n\n      if (!path.isExpressionStatement()) continue;\n\n      var loop = path.findParent(function (path) {\n        return path.isLoop();\n      });\n      if (loop) {\n        var uid = loop.getData(\"expressionReplacementReturnUid\");\n\n        if (!uid) {\n          var callee = this.get(\"callee\");\n          uid = callee.scope.generateDeclaredUidIdentifier(\"ret\");\n          callee.get(\"body\").pushContainer(\"body\", t.returnStatement(uid));\n          loop.setData(\"expressionReplacementReturnUid\", uid);\n        } else {\n          uid = t.identifier(uid.name);\n        }\n\n        path.get(\"expression\").replaceWith(t.assignmentExpression(\"=\", uid, path.node.expression));\n      } else {\n        path.replaceWith(t.returnStatement(path.node.expression));\n      }\n    }\n\n    return this.node;\n  }\n}\n\nfunction replaceInline(nodes) {\n  this.resync();\n\n  if (Array.isArray(nodes)) {\n    if (Array.isArray(this.container)) {\n      nodes = this._verifyNodeList(nodes);\n      this._containerInsertAfter(nodes);\n      return this.remove();\n    } else {\n      return this.replaceWithMultiple(nodes);\n    }\n  } else {\n    return this.replaceWith(nodes);\n  }\n}"]}