{"version":3,"sources":["removal.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","remove","_callRemovalHooks","_remove","_markRemoved","_assertUnremoved","_removalHooks","obj","default","resync","shareCommentsWithSiblings","_iterator","hooks","_isArray","Array","isArray","_i","_ref","length","next","done","value","fn","parentPath","container","splice","key","updateSiblingKeys","_replaceWith","shouldSkip","removed","node","buildCodeFrameError"],"mappings":"AAAA;;;;;;AAEAA,YAAQC,UAAR,GAAqB,IAArB;;AAEA,QAAIC,gBAAgBC,QAAQ,4CAAR,CAApB;;AAEA,QAAIC,gBAAgBC,uBAAuBH,aAAvB,CAApB;;AAEAF,YAAQM,MAAR,GAAiBA,MAAjB;AACAN,YAAQO,iBAAR,GAA4BA,iBAA5B;AACAP,YAAQQ,OAAR,GAAkBA,OAAlB;AACAR,YAAQS,YAAR,GAAuBA,YAAvB;AACAT,YAAQU,gBAAR,GAA2BA,gBAA3B;;AAEA,QAAIC,gBAAgBR,QAAQ,qBAAR,CAApB;;AAEA,aAASE,sBAAT,CAAgCO,GAAhC,EAAqC;AAAE,aAAOA,OAAOA,IAAIX,UAAX,GAAwBW,GAAxB,GAA8B,EAAEC,SAASD,GAAX,EAArC;AAAwD;;AAE/F,aAASN,MAAT,GAAkB;AAChB,WAAKI,gBAAL;;AAEA,WAAKI,MAAL;;AAEA,UAAI,KAAKP,iBAAL,EAAJ,EAA8B;AAC5B,aAAKE,YAAL;AACA;AACD;;AAED,WAAKM,yBAAL;AACA,WAAKP,OAAL;AACA,WAAKC,YAAL;AACD;;AAED,aAASF,iBAAT,GAA6B;AAC3B,WAAK,IAAIS,YAAYL,cAAcM,KAA9B,EAAqCC,WAAWC,MAAMC,OAAN,CAAcJ,SAAd,CAAhD,EAA0EK,KAAK,CAA/E,EAAkFL,YAAYE,WAAWF,SAAX,GAAuB,CAAC,GAAGZ,cAAcS,OAAlB,EAA2BG,SAA3B,CAA1H,IAAmK;AACjK,YAAIM,IAAJ;;AAEA,YAAIJ,QAAJ,EAAc;AACZ,cAAIG,MAAML,UAAUO,MAApB,EAA4B;AAC5BD,iBAAON,UAAUK,IAAV,CAAP;AACD,SAHD,MAGO;AACLA,eAAKL,UAAUQ,IAAV,EAAL;AACA,cAAIH,GAAGI,IAAP,EAAa;AACbH,iBAAOD,GAAGK,KAAV;AACD;;AAED,YAAIC,KAAKL,IAAT;;AAEA,YAAIK,GAAG,IAAH,EAAS,KAAKC,UAAd,CAAJ,EAA+B,OAAO,IAAP;AAChC;AACF;;AAED,aAASpB,OAAT,GAAmB;AACjB,UAAIW,MAAMC,OAAN,CAAc,KAAKS,SAAnB,CAAJ,EAAmC;AACjC,aAAKA,SAAL,CAAeC,MAAf,CAAsB,KAAKC,GAA3B,EAAgC,CAAhC;AACA,aAAKC,iBAAL,CAAuB,KAAKD,GAA5B,EAAiC,CAAC,CAAlC;AACD,OAHD,MAGO;AACL,aAAKE,YAAL,CAAkB,IAAlB;AACD;AACF;;AAED,aAASxB,YAAT,GAAwB;AACtB,WAAKyB,UAAL,GAAkB,IAAlB;AACA,WAAKC,OAAL,GAAe,IAAf;AACA,WAAKC,IAAL,GAAY,IAAZ;AACD;;AAED,aAAS1B,gBAAT,GAA4B;AAC1B,UAAI,KAAKyB,OAAT,EAAkB;AAChB,cAAM,KAAKE,mBAAL,CAAyB,4CAAzB,CAAN;AACD;AACF","file":"removal.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.remove = remove;\nexports._callRemovalHooks = _callRemovalHooks;\nexports._remove = _remove;\nexports._markRemoved = _markRemoved;\nexports._assertUnremoved = _assertUnremoved;\n\nvar _removalHooks = require(\"./lib/removal-hooks\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction remove() {\n  this._assertUnremoved();\n\n  this.resync();\n\n  if (this._callRemovalHooks()) {\n    this._markRemoved();\n    return;\n  }\n\n  this.shareCommentsWithSiblings();\n  this._remove();\n  this._markRemoved();\n}\n\nfunction _callRemovalHooks() {\n  for (var _iterator = _removalHooks.hooks, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var fn = _ref;\n\n    if (fn(this, this.parentPath)) return true;\n  }\n}\n\nfunction _remove() {\n  if (Array.isArray(this.container)) {\n    this.container.splice(this.key, 1);\n    this.updateSiblingKeys(this.key, -1);\n  } else {\n    this._replaceWith(null);\n  }\n}\n\nfunction _markRemoved() {\n  this.shouldSkip = true;\n  this.removed = true;\n  this.node = null;\n}\n\nfunction _assertUnremoved() {\n  if (this.removed) {\n    throw this.buildCodeFrameError(\"NodePath has been removed so is read-only.\");\n  }\n}"]}