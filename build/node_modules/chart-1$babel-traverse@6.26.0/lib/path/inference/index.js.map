{"version":3,"sources":["index.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","getTypeAnnotation","_getTypeAnnotation","isBaseType","couldBeBaseType","baseTypeStrictlyMatches","isGenericType","_inferers","inferers","_interopRequireWildcard","_babelTypes","t","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","typeAnnotation","type","anyTypeAnnotation","isTypeAnnotation","node","parentPath","isVariableDeclarator","declar","declarParent","isForInStatement","stringTypeAnnotation","isForOfStatement","voidTypeAnnotation","inferer","validParent","baseName","soft","_isBaseType","isStringTypeAnnotation","isNumberTypeAnnotation","isBooleanTypeAnnotation","isAnyTypeAnnotation","isMixedTypeAnnotation","isEmptyTypeAnnotation","isVoidTypeAnnotation","Error","name","isUnionTypeAnnotation","_iterator","types","_isArray","Array","isArray","_i","_ref","length","next","done","value","type2","right","left","isFlowBaseAnnotation","genericName","isGenericTypeAnnotation","isIdentifier","id"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.getTypeAnnotation = getTypeAnnotation;\nexports._getTypeAnnotation = _getTypeAnnotation;\nexports.isBaseType = isBaseType;\nexports.couldBeBaseType = couldBeBaseType;\nexports.baseTypeStrictlyMatches = baseTypeStrictlyMatches;\nexports.isGenericType = isGenericType;\n\nvar _inferers = require(\"./inferers\");\n\nvar inferers = _interopRequireWildcard(_inferers);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getTypeAnnotation() {\n  if (this.typeAnnotation) return this.typeAnnotation;\n\n  var type = this._getTypeAnnotation() || t.anyTypeAnnotation();\n  if (t.isTypeAnnotation(type)) type = type.typeAnnotation;\n  return this.typeAnnotation = type;\n}\n\nfunction _getTypeAnnotation() {\n  var node = this.node;\n\n  if (!node) {\n    if (this.key === \"init\" && this.parentPath.isVariableDeclarator()) {\n      var declar = this.parentPath.parentPath;\n      var declarParent = declar.parentPath;\n\n      if (declar.key === \"left\" && declarParent.isForInStatement()) {\n        return t.stringTypeAnnotation();\n      }\n\n      if (declar.key === \"left\" && declarParent.isForOfStatement()) {\n        return t.anyTypeAnnotation();\n      }\n\n      return t.voidTypeAnnotation();\n    } else {\n      return;\n    }\n  }\n\n  if (node.typeAnnotation) {\n    return node.typeAnnotation;\n  }\n\n  var inferer = inferers[node.type];\n  if (inferer) {\n    return inferer.call(this, node);\n  }\n\n  inferer = inferers[this.parentPath.type];\n  if (inferer && inferer.validParent) {\n    return this.parentPath.getTypeAnnotation();\n  }\n}\n\nfunction isBaseType(baseName, soft) {\n  return _isBaseType(baseName, this.getTypeAnnotation(), soft);\n}\n\nfunction _isBaseType(baseName, type, soft) {\n  if (baseName === \"string\") {\n    return t.isStringTypeAnnotation(type);\n  } else if (baseName === \"number\") {\n    return t.isNumberTypeAnnotation(type);\n  } else if (baseName === \"boolean\") {\n    return t.isBooleanTypeAnnotation(type);\n  } else if (baseName === \"any\") {\n    return t.isAnyTypeAnnotation(type);\n  } else if (baseName === \"mixed\") {\n    return t.isMixedTypeAnnotation(type);\n  } else if (baseName === \"empty\") {\n    return t.isEmptyTypeAnnotation(type);\n  } else if (baseName === \"void\") {\n    return t.isVoidTypeAnnotation(type);\n  } else {\n    if (soft) {\n      return false;\n    } else {\n      throw new Error(\"Unknown base type \" + baseName);\n    }\n  }\n}\n\nfunction couldBeBaseType(name) {\n  var type = this.getTypeAnnotation();\n  if (t.isAnyTypeAnnotation(type)) return true;\n\n  if (t.isUnionTypeAnnotation(type)) {\n    for (var _iterator = type.types, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var type2 = _ref;\n\n      if (t.isAnyTypeAnnotation(type2) || _isBaseType(name, type2, true)) {\n        return true;\n      }\n    }\n    return false;\n  } else {\n    return _isBaseType(name, type, true);\n  }\n}\n\nfunction baseTypeStrictlyMatches(right) {\n  var left = this.getTypeAnnotation();\n  right = right.getTypeAnnotation();\n\n  if (!t.isAnyTypeAnnotation(left) && t.isFlowBaseAnnotation(left)) {\n    return right.type === left.type;\n  }\n}\n\nfunction isGenericType(genericName) {\n  var type = this.getTypeAnnotation();\n  return t.isGenericTypeAnnotation(type) && t.isIdentifier(type.id, { name: genericName });\n}"]}