{"version":3,"sources":["index.js"],"names":["exports","__esModule","_keys","require","_keys2","_interopRequireDefault","push","hasComputed","toComputedObjectFromClass","toClassObject","toDefineObject","_babelHelperFunctionName","_babelHelperFunctionName2","_has","_has2","_babelTypes","t","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","toKind","node","isClassMethod","isObjectMethod","kind","mutatorMap","file","scope","alias","toKeyAlias","map","_inherits","_key","computed","_computed","decorators","arrayExpression","elements","concat","dec","expression","reverse","value","initializer","buildCodeFrameError","isObjectProperty","toComputedKey","isClassProperty","functionExpression","params","body","generator","async","returnType","inheritedKind","isStringLiteral","isFunctionExpression","id","inheritsComments","objExpr","i","properties","length","prop","val","unshift","objectProperty","identifier","objectExpression","forEach","mutatorMapKey","mapNode","propNode","inheritNode","removeComments","writable","booleanLiteral","configurable","enumerable"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _keys = require(\"babel-runtime/core-js/object/keys\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nexports.push = push;\nexports.hasComputed = hasComputed;\nexports.toComputedObjectFromClass = toComputedObjectFromClass;\nexports.toClassObject = toClassObject;\nexports.toDefineObject = toDefineObject;\n\nvar _babelHelperFunctionName = require(\"babel-helper-function-name\");\n\nvar _babelHelperFunctionName2 = _interopRequireDefault(_babelHelperFunctionName);\n\nvar _has = require(\"lodash/has\");\n\nvar _has2 = _interopRequireDefault(_has);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toKind(node) {\n  if (t.isClassMethod(node) || t.isObjectMethod(node)) {\n    if (node.kind === \"get\" || node.kind === \"set\") {\n      return node.kind;\n    }\n  }\n\n  return \"value\";\n}\n\nfunction push(mutatorMap, node, kind, file, scope) {\n  var alias = t.toKeyAlias(node);\n\n  var map = {};\n  if ((0, _has2.default)(mutatorMap, alias)) map = mutatorMap[alias];\n  mutatorMap[alias] = map;\n\n  map._inherits = map._inherits || [];\n  map._inherits.push(node);\n\n  map._key = node.key;\n\n  if (node.computed) {\n    map._computed = true;\n  }\n\n  if (node.decorators) {\n    var decorators = map.decorators = map.decorators || t.arrayExpression([]);\n    decorators.elements = decorators.elements.concat(node.decorators.map(function (dec) {\n      return dec.expression;\n    }).reverse());\n  }\n\n  if (map.value || map.initializer) {\n    throw file.buildCodeFrameError(node, \"Key conflict with sibling node\");\n  }\n\n  var key = void 0,\n      value = void 0;\n\n  if (t.isObjectProperty(node) || t.isObjectMethod(node) || t.isClassMethod(node)) {\n    key = t.toComputedKey(node, node.key);\n  }\n\n  if (t.isObjectProperty(node) || t.isClassProperty(node)) {\n    value = node.value;\n  } else if (t.isObjectMethod(node) || t.isClassMethod(node)) {\n    value = t.functionExpression(null, node.params, node.body, node.generator, node.async);\n    value.returnType = node.returnType;\n  }\n\n  var inheritedKind = toKind(node);\n  if (!kind || inheritedKind !== \"value\") {\n    kind = inheritedKind;\n  }\n\n  if (scope && t.isStringLiteral(key) && (kind === \"value\" || kind === \"initializer\") && t.isFunctionExpression(value)) {\n    value = (0, _babelHelperFunctionName2.default)({ id: key, node: value, scope: scope });\n  }\n\n  if (value) {\n    t.inheritsComments(value, node);\n    map[kind] = value;\n  }\n\n  return map;\n}\n\nfunction hasComputed(mutatorMap) {\n  for (var key in mutatorMap) {\n    if (mutatorMap[key]._computed) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction toComputedObjectFromClass(obj) {\n  var objExpr = t.arrayExpression([]);\n\n  for (var i = 0; i < obj.properties.length; i++) {\n    var prop = obj.properties[i];\n    var val = prop.value;\n    val.properties.unshift(t.objectProperty(t.identifier(\"key\"), t.toComputedKey(prop)));\n    objExpr.elements.push(val);\n  }\n\n  return objExpr;\n}\n\nfunction toClassObject(mutatorMap) {\n  var objExpr = t.objectExpression([]);\n\n  (0, _keys2.default)(mutatorMap).forEach(function (mutatorMapKey) {\n    var map = mutatorMap[mutatorMapKey];\n    var mapNode = t.objectExpression([]);\n\n    var propNode = t.objectProperty(map._key, mapNode, map._computed);\n\n    (0, _keys2.default)(map).forEach(function (key) {\n      var node = map[key];\n      if (key[0] === \"_\") return;\n\n      var inheritNode = node;\n      if (t.isClassMethod(node) || t.isClassProperty(node)) node = node.value;\n\n      var prop = t.objectProperty(t.identifier(key), node);\n      t.inheritsComments(prop, inheritNode);\n      t.removeComments(inheritNode);\n\n      mapNode.properties.push(prop);\n    });\n\n    objExpr.properties.push(propNode);\n  });\n\n  return objExpr;\n}\n\nfunction toDefineObject(mutatorMap) {\n  (0, _keys2.default)(mutatorMap).forEach(function (key) {\n    var map = mutatorMap[key];\n    if (map.value) map.writable = t.booleanLiteral(true);\n    map.configurable = t.booleanLiteral(true);\n    map.enumerable = t.booleanLiteral(true);\n  });\n\n  return toClassObject(mutatorMap);\n}"]}