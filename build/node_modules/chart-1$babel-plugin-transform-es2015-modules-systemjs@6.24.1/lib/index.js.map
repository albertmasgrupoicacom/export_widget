{"version":3,"sources":["index.js"],"names":["exports","__esModule","_create","require","_create2","_interopRequireDefault","_getIterator2","_getIterator3","_symbol","_symbol2","default","_ref","t","types","IGNORE_REASSIGNMENT_SYMBOL","reassignmentVisitor","AssignmentExpressionUpdateExpression","path","node","arg","get","isAssignmentExpression","isIdentifier","name","scope","getBinding","exportedNames","isPostUpdateExpression","isUpdateExpression","prefix","operator","binaryExpression","argument","numericLiteral","_iterator","_isArray","Array","isArray","_i","_ref2","length","next","done","value","exportedName","buildCall","expression","sequenceExpression","replaceWith","visitor","CallExpression","state","callee","type","TYPE_IMPORT","contextIdent","callExpression","memberExpression","identifier","arguments","ReferencedIdentifier","hasBinding","Program","enter","generateUidIdentifier","exit","exportIdent","exportNames","modules","beforeBody","setters","sources","variableIds","removedPaths","addExportName","key","val","push","pushModule","source","specifiers","module","forEach","m","imports","concat","buildExportCall","expressionStatement","stringLiteral","body","canHoist","_iterator2","_isArray2","_i2","_ref3","_path","isExportDeclaration","isVariableDeclaration","kind","_iterator3","_isArray3","_i3","_ref4","_path2","isFunctionDeclaration","isImportDeclaration","getBindingIdentifiers","removeBinding","remove","isExportAllDeclaration","isExportDefaultDeclaration","declar","isClassDeclaration","id","nodes","toExpression","replaceWithMultiple","isExportNamedDeclaration","_declar","_nodes","bindingIdentifiers","isFunction","_name","_bindingIdentifiers","_name2","insertAfter","_nodes2","_iterator7","_isArray7","_i7","_ref8","specifier","exported","local","setterBody","target","_iterator4","_isArray4","_i4","_ref5","isImportNamespaceSpecifier","assignmentExpression","isImportDefaultSpecifier","importSpecifier","isImportSpecifier","imported","exportObjRef","variableDeclaration","variableDeclarator","objectExpression","_iterator5","_isArray5","_i5","_ref6","buildExportAll","KEY","EXPORT_OBJ","TARGET","isExportSpecifier","functionExpression","blockStatement","moduleName","getModuleName","_babelHelperHoistVariables2","unshift","map","traverse","_iterator6","_isArray6","_i6","_ref7","_path3","buildTemplate","SYSTEM_REGISTER","opts","systemGlobal","BEFORE_BODY","MODULE_NAME","SETTERS","SOURCES","BODY","EXPORT_IDENTIFIER","CONTEXT_IDENTIFIER","_babelHelperHoistVariables","_babelTemplate","_babelTemplate2","obj"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _create = require(\"babel-runtime/core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _symbol = require(\"babel-runtime/core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nexports.default = function (_ref) {\n  var t = _ref.types;\n\n  var IGNORE_REASSIGNMENT_SYMBOL = (0, _symbol2.default)();\n\n  var reassignmentVisitor = {\n    \"AssignmentExpression|UpdateExpression\": function AssignmentExpressionUpdateExpression(path) {\n      if (path.node[IGNORE_REASSIGNMENT_SYMBOL]) return;\n      path.node[IGNORE_REASSIGNMENT_SYMBOL] = true;\n\n      var arg = path.get(path.isAssignmentExpression() ? \"left\" : \"argument\");\n      if (!arg.isIdentifier()) return;\n\n      var name = arg.node.name;\n\n      if (this.scope.getBinding(name) !== path.scope.getBinding(name)) return;\n\n      var exportedNames = this.exports[name];\n      if (!exportedNames) return;\n\n      var node = path.node;\n\n      var isPostUpdateExpression = path.isUpdateExpression() && !node.prefix;\n      if (isPostUpdateExpression) {\n        if (node.operator === \"++\") node = t.binaryExpression(\"+\", node.argument, t.numericLiteral(1));else if (node.operator === \"--\") node = t.binaryExpression(\"-\", node.argument, t.numericLiteral(1));else isPostUpdateExpression = false;\n      }\n\n      for (var _iterator = exportedNames, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n        var _ref2;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref2 = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref2 = _i.value;\n        }\n\n        var exportedName = _ref2;\n\n        node = this.buildCall(exportedName, node).expression;\n      }\n\n      if (isPostUpdateExpression) node = t.sequenceExpression([node, path.node]);\n\n      path.replaceWith(node);\n    }\n  };\n\n  return {\n    visitor: {\n      CallExpression: function CallExpression(path, state) {\n        if (path.node.callee.type === TYPE_IMPORT) {\n          var contextIdent = state.contextIdent;\n          path.replaceWith(t.callExpression(t.memberExpression(contextIdent, t.identifier(\"import\")), path.node.arguments));\n        }\n      },\n      ReferencedIdentifier: function ReferencedIdentifier(path, state) {\n        if (path.node.name == \"__moduleName\" && !path.scope.hasBinding(\"__moduleName\")) {\n          path.replaceWith(t.memberExpression(state.contextIdent, t.identifier(\"id\")));\n        }\n      },\n\n\n      Program: {\n        enter: function enter(path, state) {\n          state.contextIdent = path.scope.generateUidIdentifier(\"context\");\n        },\n        exit: function exit(path, state) {\n          var exportIdent = path.scope.generateUidIdentifier(\"export\");\n          var contextIdent = state.contextIdent;\n\n          var exportNames = (0, _create2.default)(null);\n          var modules = [];\n\n          var beforeBody = [];\n          var setters = [];\n          var sources = [];\n          var variableIds = [];\n          var removedPaths = [];\n\n          function addExportName(key, val) {\n            exportNames[key] = exportNames[key] || [];\n            exportNames[key].push(val);\n          }\n\n          function pushModule(source, key, specifiers) {\n            var module = void 0;\n            modules.forEach(function (m) {\n              if (m.key === source) {\n                module = m;\n              }\n            });\n            if (!module) {\n              modules.push(module = { key: source, imports: [], exports: [] });\n            }\n            module[key] = module[key].concat(specifiers);\n          }\n\n          function buildExportCall(name, val) {\n            return t.expressionStatement(t.callExpression(exportIdent, [t.stringLiteral(name), val]));\n          }\n\n          var body = path.get(\"body\");\n\n          var canHoist = true;\n          for (var _iterator2 = body, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n            var _ref3;\n\n            if (_isArray2) {\n              if (_i2 >= _iterator2.length) break;\n              _ref3 = _iterator2[_i2++];\n            } else {\n              _i2 = _iterator2.next();\n              if (_i2.done) break;\n              _ref3 = _i2.value;\n            }\n\n            var _path = _ref3;\n\n            if (_path.isExportDeclaration()) _path = _path.get(\"declaration\");\n            if (_path.isVariableDeclaration() && _path.node.kind !== \"var\") {\n              canHoist = false;\n              break;\n            }\n          }\n\n          for (var _iterator3 = body, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n            var _ref4;\n\n            if (_isArray3) {\n              if (_i3 >= _iterator3.length) break;\n              _ref4 = _iterator3[_i3++];\n            } else {\n              _i3 = _iterator3.next();\n              if (_i3.done) break;\n              _ref4 = _i3.value;\n            }\n\n            var _path2 = _ref4;\n\n            if (canHoist && _path2.isFunctionDeclaration()) {\n              beforeBody.push(_path2.node);\n              removedPaths.push(_path2);\n            } else if (_path2.isImportDeclaration()) {\n              var source = _path2.node.source.value;\n              pushModule(source, \"imports\", _path2.node.specifiers);\n              for (var name in _path2.getBindingIdentifiers()) {\n                _path2.scope.removeBinding(name);\n                variableIds.push(t.identifier(name));\n              }\n              _path2.remove();\n            } else if (_path2.isExportAllDeclaration()) {\n              pushModule(_path2.node.source.value, \"exports\", _path2.node);\n              _path2.remove();\n            } else if (_path2.isExportDefaultDeclaration()) {\n              var declar = _path2.get(\"declaration\");\n              if (declar.isClassDeclaration() || declar.isFunctionDeclaration()) {\n                var id = declar.node.id;\n                var nodes = [];\n\n                if (id) {\n                  nodes.push(declar.node);\n                  nodes.push(buildExportCall(\"default\", id));\n                  addExportName(id.name, \"default\");\n                } else {\n                  nodes.push(buildExportCall(\"default\", t.toExpression(declar.node)));\n                }\n\n                if (!canHoist || declar.isClassDeclaration()) {\n                  _path2.replaceWithMultiple(nodes);\n                } else {\n                  beforeBody = beforeBody.concat(nodes);\n                  removedPaths.push(_path2);\n                }\n              } else {\n                _path2.replaceWith(buildExportCall(\"default\", declar.node));\n              }\n            } else if (_path2.isExportNamedDeclaration()) {\n              var _declar = _path2.get(\"declaration\");\n\n              if (_declar.node) {\n                _path2.replaceWith(_declar);\n\n                var _nodes = [];\n                var bindingIdentifiers = void 0;\n                if (_path2.isFunction()) {\n                  var node = _declar.node;\n                  var _name = node.id.name;\n                  if (canHoist) {\n                    addExportName(_name, _name);\n                    beforeBody.push(node);\n                    beforeBody.push(buildExportCall(_name, node.id));\n                    removedPaths.push(_path2);\n                  } else {\n                    var _bindingIdentifiers;\n\n                    bindingIdentifiers = (_bindingIdentifiers = {}, _bindingIdentifiers[_name] = node.id, _bindingIdentifiers);\n                  }\n                } else {\n                  bindingIdentifiers = _declar.getBindingIdentifiers();\n                }\n                for (var _name2 in bindingIdentifiers) {\n                  addExportName(_name2, _name2);\n                  _nodes.push(buildExportCall(_name2, t.identifier(_name2)));\n                }\n                _path2.insertAfter(_nodes);\n              } else {\n                var specifiers = _path2.node.specifiers;\n                if (specifiers && specifiers.length) {\n                  if (_path2.node.source) {\n                    pushModule(_path2.node.source.value, \"exports\", specifiers);\n                    _path2.remove();\n                  } else {\n                    var _nodes2 = [];\n\n                    for (var _iterator7 = specifiers, _isArray7 = Array.isArray(_iterator7), _i7 = 0, _iterator7 = _isArray7 ? _iterator7 : (0, _getIterator3.default)(_iterator7);;) {\n                      var _ref8;\n\n                      if (_isArray7) {\n                        if (_i7 >= _iterator7.length) break;\n                        _ref8 = _iterator7[_i7++];\n                      } else {\n                        _i7 = _iterator7.next();\n                        if (_i7.done) break;\n                        _ref8 = _i7.value;\n                      }\n\n                      var specifier = _ref8;\n\n                      _nodes2.push(buildExportCall(specifier.exported.name, specifier.local));\n                      addExportName(specifier.local.name, specifier.exported.name);\n                    }\n\n                    _path2.replaceWithMultiple(_nodes2);\n                  }\n                }\n              }\n            }\n          }\n\n          modules.forEach(function (specifiers) {\n            var setterBody = [];\n            var target = path.scope.generateUidIdentifier(specifiers.key);\n\n            for (var _iterator4 = specifiers.imports, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : (0, _getIterator3.default)(_iterator4);;) {\n              var _ref5;\n\n              if (_isArray4) {\n                if (_i4 >= _iterator4.length) break;\n                _ref5 = _iterator4[_i4++];\n              } else {\n                _i4 = _iterator4.next();\n                if (_i4.done) break;\n                _ref5 = _i4.value;\n              }\n\n              var specifier = _ref5;\n\n              if (t.isImportNamespaceSpecifier(specifier)) {\n                setterBody.push(t.expressionStatement(t.assignmentExpression(\"=\", specifier.local, target)));\n              } else if (t.isImportDefaultSpecifier(specifier)) {\n                specifier = t.importSpecifier(specifier.local, t.identifier(\"default\"));\n              }\n\n              if (t.isImportSpecifier(specifier)) {\n                setterBody.push(t.expressionStatement(t.assignmentExpression(\"=\", specifier.local, t.memberExpression(target, specifier.imported))));\n              }\n            }\n\n            if (specifiers.exports.length) {\n              var exportObjRef = path.scope.generateUidIdentifier(\"exportObj\");\n\n              setterBody.push(t.variableDeclaration(\"var\", [t.variableDeclarator(exportObjRef, t.objectExpression([]))]));\n\n              for (var _iterator5 = specifiers.exports, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : (0, _getIterator3.default)(_iterator5);;) {\n                var _ref6;\n\n                if (_isArray5) {\n                  if (_i5 >= _iterator5.length) break;\n                  _ref6 = _iterator5[_i5++];\n                } else {\n                  _i5 = _iterator5.next();\n                  if (_i5.done) break;\n                  _ref6 = _i5.value;\n                }\n\n                var node = _ref6;\n\n                if (t.isExportAllDeclaration(node)) {\n                  setterBody.push(buildExportAll({\n                    KEY: path.scope.generateUidIdentifier(\"key\"),\n                    EXPORT_OBJ: exportObjRef,\n                    TARGET: target\n                  }));\n                } else if (t.isExportSpecifier(node)) {\n                  setterBody.push(t.expressionStatement(t.assignmentExpression(\"=\", t.memberExpression(exportObjRef, node.exported), t.memberExpression(target, node.local))));\n                } else {}\n              }\n\n              setterBody.push(t.expressionStatement(t.callExpression(exportIdent, [exportObjRef])));\n            }\n\n            sources.push(t.stringLiteral(specifiers.key));\n            setters.push(t.functionExpression(null, [target], t.blockStatement(setterBody)));\n          });\n\n          var moduleName = this.getModuleName();\n          if (moduleName) moduleName = t.stringLiteral(moduleName);\n\n          if (canHoist) {\n            (0, _babelHelperHoistVariables2.default)(path, function (id) {\n              return variableIds.push(id);\n            });\n          }\n\n          if (variableIds.length) {\n            beforeBody.unshift(t.variableDeclaration(\"var\", variableIds.map(function (id) {\n              return t.variableDeclarator(id);\n            })));\n          }\n\n          path.traverse(reassignmentVisitor, {\n            exports: exportNames,\n            buildCall: buildExportCall,\n            scope: path.scope\n          });\n\n          for (var _iterator6 = removedPaths, _isArray6 = Array.isArray(_iterator6), _i6 = 0, _iterator6 = _isArray6 ? _iterator6 : (0, _getIterator3.default)(_iterator6);;) {\n            var _ref7;\n\n            if (_isArray6) {\n              if (_i6 >= _iterator6.length) break;\n              _ref7 = _iterator6[_i6++];\n            } else {\n              _i6 = _iterator6.next();\n              if (_i6.done) break;\n              _ref7 = _i6.value;\n            }\n\n            var _path3 = _ref7;\n\n            _path3.remove();\n          }\n\n          path.node.body = [buildTemplate({\n            SYSTEM_REGISTER: t.memberExpression(t.identifier(state.opts.systemGlobal || \"System\"), t.identifier(\"register\")),\n            BEFORE_BODY: beforeBody,\n            MODULE_NAME: moduleName,\n            SETTERS: setters,\n            SOURCES: sources,\n            BODY: path.node.body,\n            EXPORT_IDENTIFIER: exportIdent,\n            CONTEXT_IDENTIFIER: contextIdent\n          })];\n        }\n      }\n    }\n  };\n};\n\nvar _babelHelperHoistVariables = require(\"babel-helper-hoist-variables\");\n\nvar _babelHelperHoistVariables2 = _interopRequireDefault(_babelHelperHoistVariables);\n\nvar _babelTemplate = require(\"babel-template\");\n\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar buildTemplate = (0, _babelTemplate2.default)(\"\\n  SYSTEM_REGISTER(MODULE_NAME, [SOURCES], function (EXPORT_IDENTIFIER, CONTEXT_IDENTIFIER) {\\n    \\\"use strict\\\";\\n    BEFORE_BODY;\\n    return {\\n      setters: [SETTERS],\\n      execute: function () {\\n        BODY;\\n      }\\n    };\\n  });\\n\");\n\nvar buildExportAll = (0, _babelTemplate2.default)(\"\\n  for (var KEY in TARGET) {\\n    if (KEY !== \\\"default\\\" && KEY !== \\\"__esModule\\\") EXPORT_OBJ[KEY] = TARGET[KEY];\\n  }\\n\");\n\nvar TYPE_IMPORT = \"Import\";\n\nmodule.exports = exports[\"default\"];"]}