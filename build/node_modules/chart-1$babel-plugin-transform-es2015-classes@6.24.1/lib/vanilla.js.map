{"version":3,"sources":["vanilla.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_babelTraverse","_babelHelperReplaceSupers","_babelHelperReplaceSupers2","_babelHelperOptimiseCallExpression","_babelHelperOptimiseCallExpression2","_babelHelperDefineMap","defineMap","_interopRequireWildcard","_babelTemplate","_babelTemplate2","_babelTypes","t","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","buildDerivedConstructor","noMethodVisitor","FunctionExpressionFunctionDeclaration","path","is","skip","Method","verifyConstructorVisitor","visitors","merge","Super","isDerived","hasBareSuper","parentPath","isCallExpression","callee","node","buildCodeFrameError","CallExpression","exit","get","isSuper","ThisExpression","inShadow","findThisesVisitor","superThises","push","ClassTransformer","file","parent","scope","clearDescriptors","instancePropBody","instancePropRefs","staticPropBody","body","bareSuperAfter","bareSupers","pushedConstructor","pushedInherits","isLoose","classId","id","classRef","identifier","name","generateUidIdentifier","superName","superClass","run","_this","constructorBody","blockStatement","constructor","buildConstructor","closureParams","closureArgs","generateUidIdentifierBasedOnNode","buildBody","unshift","expressionStatement","callExpression","addHelper","thisExpression","concat","map","fn","length","toExpression","returnStatement","container","functionExpression","shadow","func","functionDeclaration","inherits","pushToMap","enumerable","kind","arguments","undefined","mutatorMap","static","hasStaticDescriptors","staticMutatorMap","hasInstanceDescriptors","instanceMutatorMap","booleanLiteral","constructorMeMaybe","hasConstructor","paths","_iterator","_isArray","Array","isArray","_i","_ref","next","done","value","equals","params","_constructor","expression","unshiftContainer","classMethod","pushBody","verifyConstructor","userConstructor","pushDescriptors","classBodyPaths","_iterator2","_isArray2","_i2","_ref2","isClassProperty","decorators","isClassMethod","isConstructor","traverse","replaceSupers","forceSuperMemoisation","methodPath","methodNode","objectRef","superRef","isStatic","replace","pushConstructor","pushMethod","pushInherits","instanceProps","staticProps","toClassObject","toComputedObjectFromClass","nullNode","nullLiteral","args","instanceInitializersId","buildObjectAssignment","staticInitializersId","lastNonNullIndex","i","slice","variableDeclaration","variableDeclarator","objectExpression","wrapSuperCall","bareSuper","thisRef","bareSuperNode","isSpreadElement","isIdentifier","argument","memberExpression","logicalExpression","isExpressionStatement","assignmentExpression","toSequenceExpression","replaceWith","replaceWithMultiple","_this2","userConstructorPath","guaranteedSuperBeforeFinish","_iterator3","_isArray3","_i3","_ref3","find","isLoop","isConditional","_iterator4","_isArray4","_i4","_ref4","thisPath","wrapReturn","returnArg","bodyPaths","pop","isReturnStatement","pushContainer","_iterator5","superReturns","_isArray5","_i5","_ref5","returnPath","ref","generateDeclaredUidIdentifier","_processMethod","method","returns","hasOwnBinding","rename","construct","inheritsComments","_ignoreUserWhitespace","directives","_pushConstructor","module"],"mappings":"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","file":"vanilla.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _babelTraverse = require(\"babel-traverse\");\n\nvar _babelHelperReplaceSupers = require(\"babel-helper-replace-supers\");\n\nvar _babelHelperReplaceSupers2 = _interopRequireDefault(_babelHelperReplaceSupers);\n\nvar _babelHelperOptimiseCallExpression = require(\"babel-helper-optimise-call-expression\");\n\nvar _babelHelperOptimiseCallExpression2 = _interopRequireDefault(_babelHelperOptimiseCallExpression);\n\nvar _babelHelperDefineMap = require(\"babel-helper-define-map\");\n\nvar defineMap = _interopRequireWildcard(_babelHelperDefineMap);\n\nvar _babelTemplate = require(\"babel-template\");\n\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar buildDerivedConstructor = (0, _babelTemplate2.default)(\"\\n  (function () {\\n    super(...arguments);\\n  })\\n\");\n\nvar noMethodVisitor = {\n  \"FunctionExpression|FunctionDeclaration\": function FunctionExpressionFunctionDeclaration(path) {\n    if (!path.is(\"shadow\")) {\n      path.skip();\n    }\n  },\n  Method: function Method(path) {\n    path.skip();\n  }\n};\n\nvar verifyConstructorVisitor = _babelTraverse.visitors.merge([noMethodVisitor, {\n  Super: function Super(path) {\n    if (this.isDerived && !this.hasBareSuper && !path.parentPath.isCallExpression({ callee: path.node })) {\n      throw path.buildCodeFrameError(\"'super.*' is not allowed before super()\");\n    }\n  },\n\n\n  CallExpression: {\n    exit: function exit(path) {\n      if (path.get(\"callee\").isSuper()) {\n        this.hasBareSuper = true;\n\n        if (!this.isDerived) {\n          throw path.buildCodeFrameError(\"super() is only allowed in a derived constructor\");\n        }\n      }\n    }\n  },\n\n  ThisExpression: function ThisExpression(path) {\n    if (this.isDerived && !this.hasBareSuper) {\n      if (!path.inShadow(\"this\")) {\n        throw path.buildCodeFrameError(\"'this' is not allowed before super()\");\n      }\n    }\n  }\n}]);\n\nvar findThisesVisitor = _babelTraverse.visitors.merge([noMethodVisitor, {\n  ThisExpression: function ThisExpression(path) {\n    this.superThises.push(path);\n  }\n}]);\n\nvar ClassTransformer = function () {\n  function ClassTransformer(path, file) {\n    (0, _classCallCheck3.default)(this, ClassTransformer);\n\n    this.parent = path.parent;\n    this.scope = path.scope;\n    this.node = path.node;\n    this.path = path;\n    this.file = file;\n\n    this.clearDescriptors();\n\n    this.instancePropBody = [];\n    this.instancePropRefs = {};\n    this.staticPropBody = [];\n    this.body = [];\n\n    this.bareSuperAfter = [];\n    this.bareSupers = [];\n\n    this.pushedConstructor = false;\n    this.pushedInherits = false;\n    this.isLoose = false;\n\n    this.superThises = [];\n\n    this.classId = this.node.id;\n\n    this.classRef = this.node.id ? t.identifier(this.node.id.name) : this.scope.generateUidIdentifier(\"class\");\n\n    this.superName = this.node.superClass || t.identifier(\"Function\");\n    this.isDerived = !!this.node.superClass;\n  }\n\n  ClassTransformer.prototype.run = function run() {\n    var _this = this;\n\n    var superName = this.superName;\n    var file = this.file;\n    var body = this.body;\n\n    var constructorBody = this.constructorBody = t.blockStatement([]);\n    this.constructor = this.buildConstructor();\n\n    var closureParams = [];\n    var closureArgs = [];\n\n    if (this.isDerived) {\n      closureArgs.push(superName);\n\n      superName = this.scope.generateUidIdentifierBasedOnNode(superName);\n      closureParams.push(superName);\n\n      this.superName = superName;\n    }\n\n    this.buildBody();\n\n    constructorBody.body.unshift(t.expressionStatement(t.callExpression(file.addHelper(\"classCallCheck\"), [t.thisExpression(), this.classRef])));\n\n    body = body.concat(this.staticPropBody.map(function (fn) {\n      return fn(_this.classRef);\n    }));\n\n    if (this.classId) {\n      if (body.length === 1) return t.toExpression(body[0]);\n    }\n\n    body.push(t.returnStatement(this.classRef));\n\n    var container = t.functionExpression(null, closureParams, t.blockStatement(body));\n    container.shadow = true;\n    return t.callExpression(container, closureArgs);\n  };\n\n  ClassTransformer.prototype.buildConstructor = function buildConstructor() {\n    var func = t.functionDeclaration(this.classRef, [], this.constructorBody);\n    t.inherits(func, this.node);\n    return func;\n  };\n\n  ClassTransformer.prototype.pushToMap = function pushToMap(node, enumerable) {\n    var kind = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"value\";\n    var scope = arguments[3];\n\n    var mutatorMap = void 0;\n    if (node.static) {\n      this.hasStaticDescriptors = true;\n      mutatorMap = this.staticMutatorMap;\n    } else {\n      this.hasInstanceDescriptors = true;\n      mutatorMap = this.instanceMutatorMap;\n    }\n\n    var map = defineMap.push(mutatorMap, node, kind, this.file, scope);\n\n    if (enumerable) {\n      map.enumerable = t.booleanLiteral(true);\n    }\n\n    return map;\n  };\n\n  ClassTransformer.prototype.constructorMeMaybe = function constructorMeMaybe() {\n    var hasConstructor = false;\n    var paths = this.path.get(\"body.body\");\n    for (var _iterator = paths, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var path = _ref;\n\n      hasConstructor = path.equals(\"kind\", \"constructor\");\n      if (hasConstructor) break;\n    }\n    if (hasConstructor) return;\n\n    var params = void 0,\n        body = void 0;\n\n    if (this.isDerived) {\n      var _constructor = buildDerivedConstructor().expression;\n      params = _constructor.params;\n      body = _constructor.body;\n    } else {\n      params = [];\n      body = t.blockStatement([]);\n    }\n\n    this.path.get(\"body\").unshiftContainer(\"body\", t.classMethod(\"constructor\", t.identifier(\"constructor\"), params, body));\n  };\n\n  ClassTransformer.prototype.buildBody = function buildBody() {\n    this.constructorMeMaybe();\n    this.pushBody();\n    this.verifyConstructor();\n\n    if (this.userConstructor) {\n      var constructorBody = this.constructorBody;\n      constructorBody.body = constructorBody.body.concat(this.userConstructor.body.body);\n      t.inherits(this.constructor, this.userConstructor);\n      t.inherits(constructorBody, this.userConstructor.body);\n    }\n\n    this.pushDescriptors();\n  };\n\n  ClassTransformer.prototype.pushBody = function pushBody() {\n    var classBodyPaths = this.path.get(\"body.body\");\n\n    for (var _iterator2 = classBodyPaths, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var path = _ref2;\n\n      var node = path.node;\n\n      if (path.isClassProperty()) {\n        throw path.buildCodeFrameError(\"Missing class properties transform.\");\n      }\n\n      if (node.decorators) {\n        throw path.buildCodeFrameError(\"Method has decorators, put the decorator plugin before the classes one.\");\n      }\n\n      if (t.isClassMethod(node)) {\n        var isConstructor = node.kind === \"constructor\";\n\n        if (isConstructor) {\n          path.traverse(verifyConstructorVisitor, this);\n\n          if (!this.hasBareSuper && this.isDerived) {\n            throw path.buildCodeFrameError(\"missing super() call in constructor\");\n          }\n        }\n\n        var replaceSupers = new _babelHelperReplaceSupers2.default({\n          forceSuperMemoisation: isConstructor,\n          methodPath: path,\n          methodNode: node,\n          objectRef: this.classRef,\n          superRef: this.superName,\n          isStatic: node.static,\n          isLoose: this.isLoose,\n          scope: this.scope,\n          file: this.file\n        }, true);\n\n        replaceSupers.replace();\n\n        if (isConstructor) {\n          this.pushConstructor(replaceSupers, node, path);\n        } else {\n          this.pushMethod(node, path);\n        }\n      }\n    }\n  };\n\n  ClassTransformer.prototype.clearDescriptors = function clearDescriptors() {\n    this.hasInstanceDescriptors = false;\n    this.hasStaticDescriptors = false;\n\n    this.instanceMutatorMap = {};\n    this.staticMutatorMap = {};\n  };\n\n  ClassTransformer.prototype.pushDescriptors = function pushDescriptors() {\n    this.pushInherits();\n\n    var body = this.body;\n\n    var instanceProps = void 0;\n    var staticProps = void 0;\n\n    if (this.hasInstanceDescriptors) {\n      instanceProps = defineMap.toClassObject(this.instanceMutatorMap);\n    }\n\n    if (this.hasStaticDescriptors) {\n      staticProps = defineMap.toClassObject(this.staticMutatorMap);\n    }\n\n    if (instanceProps || staticProps) {\n      if (instanceProps) instanceProps = defineMap.toComputedObjectFromClass(instanceProps);\n      if (staticProps) staticProps = defineMap.toComputedObjectFromClass(staticProps);\n\n      var nullNode = t.nullLiteral();\n\n      var args = [this.classRef, nullNode, nullNode, nullNode, nullNode];\n\n      if (instanceProps) args[1] = instanceProps;\n      if (staticProps) args[2] = staticProps;\n\n      if (this.instanceInitializersId) {\n        args[3] = this.instanceInitializersId;\n        body.unshift(this.buildObjectAssignment(this.instanceInitializersId));\n      }\n\n      if (this.staticInitializersId) {\n        args[4] = this.staticInitializersId;\n        body.unshift(this.buildObjectAssignment(this.staticInitializersId));\n      }\n\n      var lastNonNullIndex = 0;\n      for (var i = 0; i < args.length; i++) {\n        if (args[i] !== nullNode) lastNonNullIndex = i;\n      }\n      args = args.slice(0, lastNonNullIndex + 1);\n\n      body.push(t.expressionStatement(t.callExpression(this.file.addHelper(\"createClass\"), args)));\n    }\n\n    this.clearDescriptors();\n  };\n\n  ClassTransformer.prototype.buildObjectAssignment = function buildObjectAssignment(id) {\n    return t.variableDeclaration(\"var\", [t.variableDeclarator(id, t.objectExpression([]))]);\n  };\n\n  ClassTransformer.prototype.wrapSuperCall = function wrapSuperCall(bareSuper, superRef, thisRef, body) {\n    var bareSuperNode = bareSuper.node;\n\n    if (this.isLoose) {\n      bareSuperNode.arguments.unshift(t.thisExpression());\n      if (bareSuperNode.arguments.length === 2 && t.isSpreadElement(bareSuperNode.arguments[1]) && t.isIdentifier(bareSuperNode.arguments[1].argument, { name: \"arguments\" })) {\n        bareSuperNode.arguments[1] = bareSuperNode.arguments[1].argument;\n        bareSuperNode.callee = t.memberExpression(superRef, t.identifier(\"apply\"));\n      } else {\n        bareSuperNode.callee = t.memberExpression(superRef, t.identifier(\"call\"));\n      }\n    } else {\n      bareSuperNode = (0, _babelHelperOptimiseCallExpression2.default)(t.logicalExpression(\"||\", t.memberExpression(this.classRef, t.identifier(\"__proto__\")), t.callExpression(t.memberExpression(t.identifier(\"Object\"), t.identifier(\"getPrototypeOf\")), [this.classRef])), t.thisExpression(), bareSuperNode.arguments);\n    }\n\n    var call = t.callExpression(this.file.addHelper(\"possibleConstructorReturn\"), [t.thisExpression(), bareSuperNode]);\n\n    var bareSuperAfter = this.bareSuperAfter.map(function (fn) {\n      return fn(thisRef);\n    });\n\n    if (bareSuper.parentPath.isExpressionStatement() && bareSuper.parentPath.container === body.node.body && body.node.body.length - 1 === bareSuper.parentPath.key) {\n\n      if (this.superThises.length || bareSuperAfter.length) {\n        bareSuper.scope.push({ id: thisRef });\n        call = t.assignmentExpression(\"=\", thisRef, call);\n      }\n\n      if (bareSuperAfter.length) {\n        call = t.toSequenceExpression([call].concat(bareSuperAfter, [thisRef]));\n      }\n\n      bareSuper.parentPath.replaceWith(t.returnStatement(call));\n    } else {\n      bareSuper.replaceWithMultiple([t.variableDeclaration(\"var\", [t.variableDeclarator(thisRef, call)])].concat(bareSuperAfter, [t.expressionStatement(thisRef)]));\n    }\n  };\n\n  ClassTransformer.prototype.verifyConstructor = function verifyConstructor() {\n    var _this2 = this;\n\n    if (!this.isDerived) return;\n\n    var path = this.userConstructorPath;\n    var body = path.get(\"body\");\n\n    path.traverse(findThisesVisitor, this);\n\n    var guaranteedSuperBeforeFinish = !!this.bareSupers.length;\n\n    var superRef = this.superName || t.identifier(\"Function\");\n    var thisRef = path.scope.generateUidIdentifier(\"this\");\n\n    for (var _iterator3 = this.bareSupers, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var bareSuper = _ref3;\n\n      this.wrapSuperCall(bareSuper, superRef, thisRef, body);\n\n      if (guaranteedSuperBeforeFinish) {\n        bareSuper.find(function (parentPath) {\n          if (parentPath === path) {\n            return true;\n          }\n\n          if (parentPath.isLoop() || parentPath.isConditional()) {\n            guaranteedSuperBeforeFinish = false;\n            return true;\n          }\n        });\n      }\n    }\n\n    for (var _iterator4 = this.superThises, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : (0, _getIterator3.default)(_iterator4);;) {\n      var _ref4;\n\n      if (_isArray4) {\n        if (_i4 >= _iterator4.length) break;\n        _ref4 = _iterator4[_i4++];\n      } else {\n        _i4 = _iterator4.next();\n        if (_i4.done) break;\n        _ref4 = _i4.value;\n      }\n\n      var thisPath = _ref4;\n\n      thisPath.replaceWith(thisRef);\n    }\n\n    var wrapReturn = function wrapReturn(returnArg) {\n      return t.callExpression(_this2.file.addHelper(\"possibleConstructorReturn\"), [thisRef].concat(returnArg || []));\n    };\n\n    var bodyPaths = body.get(\"body\");\n    if (bodyPaths.length && !bodyPaths.pop().isReturnStatement()) {\n      body.pushContainer(\"body\", t.returnStatement(guaranteedSuperBeforeFinish ? thisRef : wrapReturn()));\n    }\n\n    for (var _iterator5 = this.superReturns, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : (0, _getIterator3.default)(_iterator5);;) {\n      var _ref5;\n\n      if (_isArray5) {\n        if (_i5 >= _iterator5.length) break;\n        _ref5 = _iterator5[_i5++];\n      } else {\n        _i5 = _iterator5.next();\n        if (_i5.done) break;\n        _ref5 = _i5.value;\n      }\n\n      var returnPath = _ref5;\n\n      if (returnPath.node.argument) {\n        var ref = returnPath.scope.generateDeclaredUidIdentifier(\"ret\");\n        returnPath.get(\"argument\").replaceWithMultiple([t.assignmentExpression(\"=\", ref, returnPath.node.argument), wrapReturn(ref)]);\n      } else {\n        returnPath.get(\"argument\").replaceWith(wrapReturn());\n      }\n    }\n  };\n\n  ClassTransformer.prototype.pushMethod = function pushMethod(node, path) {\n    var scope = path ? path.scope : this.scope;\n\n    if (node.kind === \"method\") {\n      if (this._processMethod(node, scope)) return;\n    }\n\n    this.pushToMap(node, false, null, scope);\n  };\n\n  ClassTransformer.prototype._processMethod = function _processMethod() {\n    return false;\n  };\n\n  ClassTransformer.prototype.pushConstructor = function pushConstructor(replaceSupers, method, path) {\n    this.bareSupers = replaceSupers.bareSupers;\n    this.superReturns = replaceSupers.returns;\n\n    if (path.scope.hasOwnBinding(this.classRef.name)) {\n      path.scope.rename(this.classRef.name);\n    }\n\n    var construct = this.constructor;\n\n    this.userConstructorPath = path;\n    this.userConstructor = method;\n    this.hasConstructor = true;\n\n    t.inheritsComments(construct, method);\n\n    construct._ignoreUserWhitespace = true;\n    construct.params = method.params;\n\n    t.inherits(construct.body, method.body);\n    construct.body.directives = method.body.directives;\n\n    this._pushConstructor();\n  };\n\n  ClassTransformer.prototype._pushConstructor = function _pushConstructor() {\n    if (this.pushedConstructor) return;\n    this.pushedConstructor = true;\n\n    if (this.hasInstanceDescriptors || this.hasStaticDescriptors) {\n      this.pushDescriptors();\n    }\n\n    this.body.push(this.constructor);\n\n    this.pushInherits();\n  };\n\n  ClassTransformer.prototype.pushInherits = function pushInherits() {\n    if (!this.isDerived || this.pushedInherits) return;\n\n    this.pushedInherits = true;\n    this.body.unshift(t.expressionStatement(t.callExpression(this.file.addHelper(\"inherits\"), [this.classRef, this.superName])));\n  };\n\n  return ClassTransformer;\n}();\n\nexports.default = ClassTransformer;\nmodule.exports = exports[\"default\"];"]}