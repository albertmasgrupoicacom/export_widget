{"version":3,"sources":["index.js"],"names":["exports","__esModule","default","rawLines","lineNumber","colNumber","opts","arguments","length","undefined","Math","max","highlighted","highlightCode","_chalk2","supportsColor","forceColor","chalk","constructor","enabled","maybeHighlight","chalkFn","string","defs","getDefs","highlight","linesAbove","linesBelow","lines","split","NEWLINE","start","end","min","numberMaxWidth","String","frame","slice","map","line","index","number","paddedNumber","gutter","markerLine","markerSpacing","replace","marker","join","reset","_jsTokens","require","_jsTokens2","_interopRequireDefault","_esutils","_esutils2","_chalk","obj","keyword","cyan","capitalized","yellow","jsx_tag","punctuator","magenta","green","regex","comment","grey","invalid","white","bgRed","bold","red","JSX_TAG","BRACKET","getTokenType","match","_match$slice","offset","text","token","matchToToken","type","isReservedWordES6","value","test","substr","toLowerCase","_len","args","Array","_key","colorize","str","module"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (rawLines, lineNumber, colNumber) {\n  var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  colNumber = Math.max(colNumber, 0);\n\n  var highlighted = opts.highlightCode && _chalk2.default.supportsColor || opts.forceColor;\n  var chalk = _chalk2.default;\n  if (opts.forceColor) {\n    chalk = new _chalk2.default.constructor({ enabled: true });\n  }\n  var maybeHighlight = function maybeHighlight(chalkFn, string) {\n    return highlighted ? chalkFn(string) : string;\n  };\n  var defs = getDefs(chalk);\n  if (highlighted) rawLines = highlight(defs, rawLines);\n\n  var linesAbove = opts.linesAbove || 2;\n  var linesBelow = opts.linesBelow || 3;\n\n  var lines = rawLines.split(NEWLINE);\n  var start = Math.max(lineNumber - (linesAbove + 1), 0);\n  var end = Math.min(lines.length, lineNumber + linesBelow);\n\n  if (!lineNumber && !colNumber) {\n    start = 0;\n    end = lines.length;\n  }\n\n  var numberMaxWidth = String(end).length;\n\n  var frame = lines.slice(start, end).map(function (line, index) {\n    var number = start + 1 + index;\n    var paddedNumber = (\" \" + number).slice(-numberMaxWidth);\n    var gutter = \" \" + paddedNumber + \" | \";\n    if (number === lineNumber) {\n      var markerLine = \"\";\n      if (colNumber) {\n        var markerSpacing = line.slice(0, colNumber - 1).replace(/[^\\t]/g, \" \");\n        markerLine = [\"\\n \", maybeHighlight(defs.gutter, gutter.replace(/\\d/g, \" \")), markerSpacing, maybeHighlight(defs.marker, \"^\")].join(\"\");\n      }\n      return [maybeHighlight(defs.marker, \">\"), maybeHighlight(defs.gutter, gutter), line, markerLine].join(\"\");\n    } else {\n      return \" \" + maybeHighlight(defs.gutter, gutter) + line;\n    }\n  }).join(\"\\n\");\n\n  if (highlighted) {\n    return chalk.reset(frame);\n  } else {\n    return frame;\n  }\n};\n\nvar _jsTokens = require(\"js-tokens\");\n\nvar _jsTokens2 = _interopRequireDefault(_jsTokens);\n\nvar _esutils = require(\"esutils\");\n\nvar _esutils2 = _interopRequireDefault(_esutils);\n\nvar _chalk = require(\"chalk\");\n\nvar _chalk2 = _interopRequireDefault(_chalk);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getDefs(chalk) {\n  return {\n    keyword: chalk.cyan,\n    capitalized: chalk.yellow,\n    jsx_tag: chalk.yellow,\n    punctuator: chalk.yellow,\n\n    number: chalk.magenta,\n    string: chalk.green,\n    regex: chalk.magenta,\n    comment: chalk.grey,\n    invalid: chalk.white.bgRed.bold,\n    gutter: chalk.grey,\n    marker: chalk.red.bold\n  };\n}\n\nvar NEWLINE = /\\r\\n|[\\n\\r\\u2028\\u2029]/;\n\nvar JSX_TAG = /^[a-z][\\w-]*$/i;\n\nvar BRACKET = /^[()\\[\\]{}]$/;\n\nfunction getTokenType(match) {\n  var _match$slice = match.slice(-2),\n      offset = _match$slice[0],\n      text = _match$slice[1];\n\n  var token = (0, _jsTokens.matchToToken)(match);\n\n  if (token.type === \"name\") {\n    if (_esutils2.default.keyword.isReservedWordES6(token.value)) {\n      return \"keyword\";\n    }\n\n    if (JSX_TAG.test(token.value) && (text[offset - 1] === \"<\" || text.substr(offset - 2, 2) == \"</\")) {\n      return \"jsx_tag\";\n    }\n\n    if (token.value[0] !== token.value[0].toLowerCase()) {\n      return \"capitalized\";\n    }\n  }\n\n  if (token.type === \"punctuator\" && BRACKET.test(token.value)) {\n    return \"bracket\";\n  }\n\n  return token.type;\n}\n\nfunction highlight(defs, text) {\n  return text.replace(_jsTokens2.default, function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var type = getTokenType(args);\n    var colorize = defs[type];\n    if (colorize) {\n      return args[0].split(NEWLINE).map(function (str) {\n        return colorize(str);\n      }).join(\"\\n\");\n    } else {\n      return args[0];\n    }\n  });\n}\n\nmodule.exports = exports[\"default\"];"]}