{"version":3,"sources":["index.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","babel","require","code","message","test","version","Error","cache","transform","injectCaller","schema","isAbsolute","loaderUtils","validateOptions","subscribe","subscriber","metadata","context","module","exports","makeLoader","custom","callback","overrides","source","inputSourceMap","async","loader","call","_x","_x2","_x3","_loader","filename","resourcePath","loaderOptions","getOptions","name","customize","override","__esModule","default","customOptions","result","map","console","warn","babelrc","Object","prototype","hasOwnProperty","assign","sourceMaps","sourceMap","programmaticOptions","sourceFileName","cacheDirectory","cacheIdentifier","cacheCompression","metadataSubscribers","loadPartialConfig","loadPartialConfigAsync","config","target","options","JSON","stringify","files","forEach","configFile","addDependency","externalDependencies","dep"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nlet babel;\ntry {\n  babel = require(\"@babel/core\");\n} catch (err) {\n  if (err.code === \"MODULE_NOT_FOUND\") {\n    err.message += \"\\n babel-loader@8 requires Babel 7.x (the package '@babel/core'). \" + \"If you'd like to use Babel 6.x ('babel-core'), you should install 'babel-loader@7'.\";\n  }\n  throw err;\n}\n\n// Since we've got the reverse bridge package at @babel/core@6.x, give\n// people useful feedback if they try to use it alongside babel-loader.\nif (/^6\\./.test(babel.version)) {\n  throw new Error(\"\\n babel-loader@8 will not work with the '@babel/core@6' bridge package. \" + \"If you want to use Babel 6.x, install 'babel-loader@7'.\");\n}\nconst {\n  version\n} = require(\"../package.json\");\nconst cache = require(\"./cache\");\nconst transform = require(\"./transform\");\nconst injectCaller = require(\"./injectCaller\");\nconst schema = require(\"./schema\");\nconst {\n  isAbsolute\n} = require(\"path\");\nconst loaderUtils = require(\"loader-utils\");\nconst validateOptions = require(\"schema-utils\");\nfunction subscribe(subscriber, metadata, context) {\n  if (context[subscriber]) {\n    context[subscriber](metadata);\n  }\n}\nmodule.exports = makeLoader();\nmodule.exports.custom = makeLoader;\nfunction makeLoader(callback) {\n  const overrides = callback ? callback(babel) : undefined;\n  return function (source, inputSourceMap) {\n    // Make the loader async\n    const callback = this.async();\n    loader.call(this, source, inputSourceMap, overrides).then(args => callback(null, ...args), err => callback(err));\n  };\n}\nfunction loader(_x, _x2, _x3) {\n  return _loader.apply(this, arguments);\n}\nfunction _loader() {\n  _loader = _asyncToGenerator(function* (source, inputSourceMap, overrides) {\n    const filename = this.resourcePath;\n    let loaderOptions = loaderUtils.getOptions(this);\n    validateOptions(schema, loaderOptions, {\n      name: \"Babel loader\"\n    });\n    if (loaderOptions.customize != null) {\n      if (typeof loaderOptions.customize !== \"string\") {\n        throw new Error(\"Customized loaders must be implemented as standalone modules.\");\n      }\n      if (!isAbsolute(loaderOptions.customize)) {\n        throw new Error(\"Customized loaders must be passed as absolute paths, since \" + \"babel-loader has no way to know what they would be relative to.\");\n      }\n      if (overrides) {\n        throw new Error(\"babel-loader's 'customize' option is not available when already \" + \"using a customized babel-loader wrapper.\");\n      }\n      let override = require(loaderOptions.customize);\n      if (override.__esModule) override = override.default;\n      if (typeof override !== \"function\") {\n        throw new Error(\"Custom overrides must be functions.\");\n      }\n      overrides = override(babel);\n    }\n    let customOptions;\n    if (overrides && overrides.customOptions) {\n      const result = yield overrides.customOptions.call(this, loaderOptions, {\n        source,\n        map: inputSourceMap\n      });\n      customOptions = result.custom;\n      loaderOptions = result.loader;\n    }\n\n    // Deprecation handling\n    if (\"forceEnv\" in loaderOptions) {\n      console.warn(\"The option `forceEnv` has been removed in favor of `envName` in Babel 7.\");\n    }\n    if (typeof loaderOptions.babelrc === \"string\") {\n      console.warn(\"The option `babelrc` should not be set to a string anymore in the babel-loader config. \" + \"Please update your configuration and set `babelrc` to true or false.\\n\" + \"If you want to specify a specific babel config file to inherit config from \" + \"please use the `extends` option.\\nFor more information about this options see \" + \"https://babeljs.io/docs/core-packages/#options\");\n    }\n\n    // Standardize on 'sourceMaps' as the key passed through to Webpack, so that\n    // users may safely use either one alongside our default use of\n    // 'this.sourceMap' below without getting error about conflicting aliases.\n    if (Object.prototype.hasOwnProperty.call(loaderOptions, \"sourceMap\") && !Object.prototype.hasOwnProperty.call(loaderOptions, \"sourceMaps\")) {\n      loaderOptions = Object.assign({}, loaderOptions, {\n        sourceMaps: loaderOptions.sourceMap\n      });\n      delete loaderOptions.sourceMap;\n    }\n    const programmaticOptions = Object.assign({}, loaderOptions, {\n      filename,\n      inputSourceMap: inputSourceMap || loaderOptions.inputSourceMap,\n      // Set the default sourcemap behavior based on Webpack's mapping flag,\n      // but allow users to override if they want.\n      sourceMaps: loaderOptions.sourceMaps === undefined ? this.sourceMap : loaderOptions.sourceMaps,\n      // Ensure that Webpack will get a full absolute path in the sourcemap\n      // so that it can properly map the module back to its internal cached\n      // modules.\n      sourceFileName: filename\n    });\n    // Remove loader related options\n    delete programmaticOptions.customize;\n    delete programmaticOptions.cacheDirectory;\n    delete programmaticOptions.cacheIdentifier;\n    delete programmaticOptions.cacheCompression;\n    delete programmaticOptions.metadataSubscribers;\n    if (!babel.loadPartialConfig) {\n      throw new Error(`babel-loader ^8.0.0-beta.3 requires @babel/core@7.0.0-beta.41, but ` + `you appear to be using \"${babel.version}\". Either update your ` + `@babel/core version, or pin you babel-loader version to 8.0.0-beta.2`);\n    }\n\n    // babel.loadPartialConfigAsync is available in v7.8.0+\n    const {\n      loadPartialConfigAsync = babel.loadPartialConfig\n    } = babel;\n    const config = yield loadPartialConfigAsync(injectCaller(programmaticOptions, this.target));\n    if (config) {\n      let options = config.options;\n      if (overrides && overrides.config) {\n        options = yield overrides.config.call(this, config, {\n          source,\n          map: inputSourceMap,\n          customOptions\n        });\n      }\n      if (options.sourceMaps === \"inline\") {\n        // Babel has this weird behavior where if you set \"inline\", we\n        // inline the sourcemap, and set 'result.map = null'. This results\n        // in bad behavior from Babel since the maps get put into the code,\n        // which Webpack does not expect, and because the map we return to\n        // Webpack is null, which is also bad. To avoid that, we override the\n        // behavior here so \"inline\" just behaves like 'true'.\n        options.sourceMaps = true;\n      }\n      const {\n        cacheDirectory = null,\n        cacheIdentifier = JSON.stringify({\n          options,\n          \"@babel/core\": transform.version,\n          \"@babel/loader\": version\n        }),\n        cacheCompression = true,\n        metadataSubscribers = []\n      } = loaderOptions;\n      let result;\n      if (cacheDirectory) {\n        result = yield cache({\n          source,\n          options,\n          transform,\n          cacheDirectory,\n          cacheIdentifier,\n          cacheCompression\n        });\n      } else {\n        result = yield transform(source, options);\n      }\n\n      // Availabe since Babel 7.12\n      // https://github.com/babel/babel/pull/11907\n      if (config.files) {\n        config.files.forEach(configFile => this.addDependency(configFile));\n      } else {\n        // .babelrc.json\n        if (typeof config.babelrc === \"string\") {\n          this.addDependency(config.babelrc);\n        }\n        // babel.config.js\n        if (config.config) {\n          this.addDependency(config.config);\n        }\n      }\n      if (result) {\n        if (overrides && overrides.result) {\n          result = yield overrides.result.call(this, result, {\n            source,\n            map: inputSourceMap,\n            customOptions,\n            config,\n            options\n          });\n        }\n        const {\n          code,\n          map,\n          metadata,\n          externalDependencies\n        } = result;\n        externalDependencies == null ? void 0 : externalDependencies.forEach(dep => this.addDependency(dep));\n        metadataSubscribers.forEach(subscriber => {\n          subscribe(subscriber, metadata, this);\n        });\n        return [code, map];\n      }\n    }\n\n    // If the file was ignored, pass through the original content.\n    return [source, inputSourceMap];\n  });\n  return _loader.apply(this, arguments);\n}"]}