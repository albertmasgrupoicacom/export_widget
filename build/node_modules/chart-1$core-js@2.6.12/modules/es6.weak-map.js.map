{"version":3,"sources":["es6.weak-map.js"],"names":["global","require","each","redefine","meta","assign","weak","isObject","validate","NATIVE_WEAK_MAP","IS_IE11","ActiveXObject","WEAK_MAP","getWeak","isExtensible","Object","uncaughtFrozenStore","ufstore","InternalMap","wrapper","get","WeakMap","arguments","length","undefined","methods","key","data","_i","set","value","def","$WeakMap","module","exports","getConstructor","prototype","NEED","proto","method","a","b","_f","result","call"],"mappings":"AAAA;;;;;;AACA,QAAIA,SAASC,QAAQ,WAAR,CAAb;AACA,QAAIC,OAAOD,QAAQ,kBAAR,EAA4B,CAA5B,CAAX;AACA,QAAIE,WAAWF,QAAQ,aAAR,CAAf;AACA,QAAIG,OAAOH,QAAQ,SAAR,CAAX;AACA,QAAII,SAASJ,QAAQ,kBAAR,CAAb;AACA,QAAIK,OAAOL,QAAQ,oBAAR,CAAX;AACA,QAAIM,WAAWN,QAAQ,cAAR,CAAf;AACA,QAAIO,WAAWP,QAAQ,wBAAR,CAAf;AACA,QAAIQ,kBAAkBR,QAAQ,wBAAR,CAAtB;AACA,QAAIS,UAAU,CAACV,OAAOW,aAAR,IAAyB,mBAAmBX,MAA1D;AACA,QAAIY,WAAW,SAAf;AACA,QAAIC,UAAUT,KAAKS,OAAnB;AACA,QAAIC,eAAeC,OAAOD,YAA1B;AACA,QAAIE,sBAAsBV,KAAKW,OAA/B;AACA,QAAIC,WAAJ;;AAEA,QAAIC,UAAU,UAAUC,GAAV,EAAe;AAC3B,aAAO,SAASC,OAAT,GAAmB;AACxB,eAAOD,IAAI,IAAJ,EAAUE,UAAUC,MAAV,GAAmB,CAAnB,GAAuBD,UAAU,CAAV,CAAvB,GAAsCE,SAAhD,CAAP;AACD,OAFD;AAGD,KAJD;;AAMA,QAAIC,UAAU;AACZ;AACAL,WAAK,SAASA,GAAT,CAAaM,GAAb,EAAkB;AACrB,YAAInB,SAASmB,GAAT,CAAJ,EAAmB;AACjB,cAAIC,OAAOd,QAAQa,GAAR,CAAX;AACA,cAAIC,SAAS,IAAb,EAAmB,OAAOX,oBAAoBR,SAAS,IAAT,EAAeI,QAAf,CAApB,EAA8CQ,GAA9C,CAAkDM,GAAlD,CAAP;AACnB,iBAAOC,OAAOA,KAAK,KAAKC,EAAV,CAAP,GAAuBJ,SAA9B;AACD;AACF,OARW;AASZ;AACAK,WAAK,SAASA,GAAT,CAAaH,GAAb,EAAkBI,KAAlB,EAAyB;AAC5B,eAAOxB,KAAKyB,GAAL,CAASvB,SAAS,IAAT,EAAeI,QAAf,CAAT,EAAmCc,GAAnC,EAAwCI,KAAxC,CAAP;AACD;AAZW,KAAd;;AAeA;AACA,QAAIE,WAAWC,OAAOC,OAAP,GAAiBjC,QAAQ,eAAR,EAAyBW,QAAzB,EAAmCO,OAAnC,EAA4CM,OAA5C,EAAqDnB,IAArD,EAA2D,IAA3D,EAAiE,IAAjE,CAAhC;;AAEA;AACA,QAAIG,mBAAmBC,OAAvB,EAAgC;AAC9BQ,oBAAcZ,KAAK6B,cAAL,CAAoBhB,OAApB,EAA6BP,QAA7B,CAAd;AACAP,aAAOa,YAAYkB,SAAnB,EAA8BX,OAA9B;AACArB,WAAKiC,IAAL,GAAY,IAAZ;AACAnC,WAAK,CAAC,QAAD,EAAW,KAAX,EAAkB,KAAlB,EAAyB,KAAzB,CAAL,EAAsC,UAAUwB,GAAV,EAAe;AACnD,YAAIY,QAAQN,SAASI,SAArB;AACA,YAAIG,SAASD,MAAMZ,GAAN,CAAb;AACAvB,iBAASmC,KAAT,EAAgBZ,GAAhB,EAAqB,UAAUc,CAAV,EAAaC,CAAb,EAAgB;AACnC;AACA,cAAIlC,SAASiC,CAAT,KAAe,CAAC1B,aAAa0B,CAAb,CAApB,EAAqC;AACnC,gBAAI,CAAC,KAAKE,EAAV,EAAc,KAAKA,EAAL,GAAU,IAAIxB,WAAJ,EAAV;AACd,gBAAIyB,SAAS,KAAKD,EAAL,CAAQhB,GAAR,EAAac,CAAb,EAAgBC,CAAhB,CAAb;AACA,mBAAOf,OAAO,KAAP,GAAe,IAAf,GAAsBiB,MAA7B;AACF;AACC,WAAC,OAAOJ,OAAOK,IAAP,CAAY,IAAZ,EAAkBJ,CAAlB,EAAqBC,CAArB,CAAP;AACH,SARD;AASD,OAZD;AAaD","file":"es6.weak-map.js","sourcesContent":["'use strict';\nvar global = require('./_global');\nvar each = require('./_array-methods')(0);\nvar redefine = require('./_redefine');\nvar meta = require('./_meta');\nvar assign = require('./_object-assign');\nvar weak = require('./_collection-weak');\nvar isObject = require('./_is-object');\nvar validate = require('./_validate-collection');\nvar NATIVE_WEAK_MAP = require('./_validate-collection');\nvar IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;\nvar WEAK_MAP = 'WeakMap';\nvar getWeak = meta.getWeak;\nvar isExtensible = Object.isExtensible;\nvar uncaughtFrozenStore = weak.ufstore;\nvar InternalMap;\n\nvar wrapper = function (get) {\n  return function WeakMap() {\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n};\n\nvar methods = {\n  // 23.3.3.3 WeakMap.prototype.get(key)\n  get: function get(key) {\n    if (isObject(key)) {\n      var data = getWeak(key);\n      if (data === true) return uncaughtFrozenStore(validate(this, WEAK_MAP)).get(key);\n      return data ? data[this._i] : undefined;\n    }\n  },\n  // 23.3.3.5 WeakMap.prototype.set(key, value)\n  set: function set(key, value) {\n    return weak.def(validate(this, WEAK_MAP), key, value);\n  }\n};\n\n// 23.3 WeakMap Objects\nvar $WeakMap = module.exports = require('./_collection')(WEAK_MAP, wrapper, methods, weak, true, true);\n\n// IE11 WeakMap frozen keys fix\nif (NATIVE_WEAK_MAP && IS_IE11) {\n  InternalMap = weak.getConstructor(wrapper, WEAK_MAP);\n  assign(InternalMap.prototype, methods);\n  meta.NEED = true;\n  each(['delete', 'has', 'get', 'set'], function (key) {\n    var proto = $WeakMap.prototype;\n    var method = proto[key];\n    redefine(proto, key, function (a, b) {\n      // store frozen objects on internal weakmap shim\n      if (isObject(a) && !isExtensible(a)) {\n        if (!this._f) this._f = new InternalMap();\n        var result = this._f[key](a, b);\n        return key == 'set' ? this : result;\n      // store all the rest on native weakmap\n      } return method.call(this, a, b);\n    });\n  });\n}\n"]}