{"version":3,"sources":["index.js"],"names":["exports","__esModule","_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_symbol","_symbol2","_babelHelperOptimiseCallExpression","_babelHelperOptimiseCallExpression2","_babelMessages","messages","_interopRequireWildcard","_babelTypes","t","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","HARDCORE_THIS_REF","isIllegalBareSuper","node","parent","isSuper","isMemberExpression","computed","isCallExpression","callee","isMemberExpressionSuper","object","getPrototypeOfExpression","objectRef","isStatic","targetRef","memberExpression","identifier","logicalExpression","callExpression","visitor","Function","path","inShadow","skip","ReturnStatement","state","returns","push","ThisExpression","thises","enter","callback","specHandle","isLoose","looseHandle","isBareSuper","get","result","hasSuper","bareSupers","requeue","Array","isArray","replaceWithMultiple","replaceWith","ReplaceSupers","opts","inClass","arguments","length","undefined","forceSuperMemoisation","methodPath","methodNode","superRef","scope","file","getObjectRef","setSuperProperty","property","value","isComputed","addHelper","stringLiteral","name","thisExpression","getSuperProperty","replace","traverse","getLooseSuperProperty","id","static","appendToMemberExpression","unshift","specHandleAssignmentExpression","ref","operator","left","right","generateUidIdentifier","variableDeclaration","variableDeclarator","expressionStatement","assignmentExpression","binaryExpression","args","buildCodeFrameError","isUpdateExpression","argument","binary","numericLiteral","prefix","concat","isAssignmentExpression","superProperty","optimiseCall","thisNode","module"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _symbol = require(\"babel-runtime/core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _babelHelperOptimiseCallExpression = require(\"babel-helper-optimise-call-expression\");\n\nvar _babelHelperOptimiseCallExpression2 = _interopRequireDefault(_babelHelperOptimiseCallExpression);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HARDCORE_THIS_REF = (0, _symbol2.default)();\n\nfunction isIllegalBareSuper(node, parent) {\n  if (!t.isSuper(node)) return false;\n  if (t.isMemberExpression(parent, { computed: false })) return false;\n  if (t.isCallExpression(parent, { callee: node })) return false;\n  return true;\n}\n\nfunction isMemberExpressionSuper(node) {\n  return t.isMemberExpression(node) && t.isSuper(node.object);\n}\n\nfunction getPrototypeOfExpression(objectRef, isStatic) {\n  var targetRef = isStatic ? objectRef : t.memberExpression(objectRef, t.identifier(\"prototype\"));\n\n  return t.logicalExpression(\"||\", t.memberExpression(targetRef, t.identifier(\"__proto__\")), t.callExpression(t.memberExpression(t.identifier(\"Object\"), t.identifier(\"getPrototypeOf\")), [targetRef]));\n}\n\nvar visitor = {\n  Function: function Function(path) {\n    if (!path.inShadow(\"this\")) {\n      path.skip();\n    }\n  },\n  ReturnStatement: function ReturnStatement(path, state) {\n    if (!path.inShadow(\"this\")) {\n      state.returns.push(path);\n    }\n  },\n  ThisExpression: function ThisExpression(path, state) {\n    if (!path.node[HARDCORE_THIS_REF]) {\n      state.thises.push(path);\n    }\n  },\n  enter: function enter(path, state) {\n    var callback = state.specHandle;\n    if (state.isLoose) callback = state.looseHandle;\n\n    var isBareSuper = path.isCallExpression() && path.get(\"callee\").isSuper();\n\n    var result = callback.call(state, path);\n\n    if (result) {\n      state.hasSuper = true;\n    }\n\n    if (isBareSuper) {\n      state.bareSupers.push(path);\n    }\n\n    if (result === true) {\n      path.requeue();\n    }\n\n    if (result !== true && result) {\n      if (Array.isArray(result)) {\n        path.replaceWithMultiple(result);\n      } else {\n        path.replaceWith(result);\n      }\n    }\n  }\n};\n\nvar ReplaceSupers = function () {\n  function ReplaceSupers(opts) {\n    var inClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    (0, _classCallCheck3.default)(this, ReplaceSupers);\n\n    this.forceSuperMemoisation = opts.forceSuperMemoisation;\n    this.methodPath = opts.methodPath;\n    this.methodNode = opts.methodNode;\n    this.superRef = opts.superRef;\n    this.isStatic = opts.isStatic;\n    this.hasSuper = false;\n    this.inClass = inClass;\n    this.isLoose = opts.isLoose;\n    this.scope = this.methodPath.scope;\n    this.file = opts.file;\n    this.opts = opts;\n\n    this.bareSupers = [];\n    this.returns = [];\n    this.thises = [];\n  }\n\n  ReplaceSupers.prototype.getObjectRef = function getObjectRef() {\n    return this.opts.objectRef || this.opts.getObjectRef();\n  };\n\n  ReplaceSupers.prototype.setSuperProperty = function setSuperProperty(property, value, isComputed) {\n    return t.callExpression(this.file.addHelper(\"set\"), [getPrototypeOfExpression(this.getObjectRef(), this.isStatic), isComputed ? property : t.stringLiteral(property.name), value, t.thisExpression()]);\n  };\n\n  ReplaceSupers.prototype.getSuperProperty = function getSuperProperty(property, isComputed) {\n    return t.callExpression(this.file.addHelper(\"get\"), [getPrototypeOfExpression(this.getObjectRef(), this.isStatic), isComputed ? property : t.stringLiteral(property.name), t.thisExpression()]);\n  };\n\n  ReplaceSupers.prototype.replace = function replace() {\n    this.methodPath.traverse(visitor, this);\n  };\n\n  ReplaceSupers.prototype.getLooseSuperProperty = function getLooseSuperProperty(id, parent) {\n    var methodNode = this.methodNode;\n    var superRef = this.superRef || t.identifier(\"Function\");\n\n    if (parent.property === id) {\n      return;\n    } else if (t.isCallExpression(parent, { callee: id })) {\n      return;\n    } else if (t.isMemberExpression(parent) && !methodNode.static) {\n      return t.memberExpression(superRef, t.identifier(\"prototype\"));\n    } else {\n      return superRef;\n    }\n  };\n\n  ReplaceSupers.prototype.looseHandle = function looseHandle(path) {\n    var node = path.node;\n    if (path.isSuper()) {\n      return this.getLooseSuperProperty(node, path.parent);\n    } else if (path.isCallExpression()) {\n      var callee = node.callee;\n      if (!t.isMemberExpression(callee)) return;\n      if (!t.isSuper(callee.object)) return;\n\n      t.appendToMemberExpression(callee, t.identifier(\"call\"));\n      node.arguments.unshift(t.thisExpression());\n      return true;\n    }\n  };\n\n  ReplaceSupers.prototype.specHandleAssignmentExpression = function specHandleAssignmentExpression(ref, path, node) {\n    if (node.operator === \"=\") {\n      return this.setSuperProperty(node.left.property, node.right, node.left.computed);\n    } else {\n      ref = ref || path.scope.generateUidIdentifier(\"ref\");\n      return [t.variableDeclaration(\"var\", [t.variableDeclarator(ref, node.left)]), t.expressionStatement(t.assignmentExpression(\"=\", node.left, t.binaryExpression(node.operator[0], ref, node.right)))];\n    }\n  };\n\n  ReplaceSupers.prototype.specHandle = function specHandle(path) {\n    var property = void 0;\n    var computed = void 0;\n    var args = void 0;\n\n    var parent = path.parent;\n    var node = path.node;\n\n    if (isIllegalBareSuper(node, parent)) {\n      throw path.buildCodeFrameError(messages.get(\"classesIllegalBareSuper\"));\n    }\n\n    if (t.isCallExpression(node)) {\n      var callee = node.callee;\n      if (t.isSuper(callee)) {\n        return;\n      } else if (isMemberExpressionSuper(callee)) {\n        property = callee.property;\n        computed = callee.computed;\n        args = node.arguments;\n      }\n    } else if (t.isMemberExpression(node) && t.isSuper(node.object)) {\n      property = node.property;\n      computed = node.computed;\n    } else if (t.isUpdateExpression(node) && isMemberExpressionSuper(node.argument)) {\n      var binary = t.binaryExpression(node.operator[0], node.argument, t.numericLiteral(1));\n      if (node.prefix) {\n        return this.specHandleAssignmentExpression(null, path, binary);\n      } else {\n        var ref = path.scope.generateUidIdentifier(\"ref\");\n        return this.specHandleAssignmentExpression(ref, path, binary).concat(t.expressionStatement(ref));\n      }\n    } else if (t.isAssignmentExpression(node) && isMemberExpressionSuper(node.left)) {\n      return this.specHandleAssignmentExpression(null, path, node);\n    }\n\n    if (!property) return;\n\n    var superProperty = this.getSuperProperty(property, computed);\n\n    if (args) {\n      return this.optimiseCall(superProperty, args);\n    } else {\n      return superProperty;\n    }\n  };\n\n  ReplaceSupers.prototype.optimiseCall = function optimiseCall(callee, args) {\n    var thisNode = t.thisExpression();\n    thisNode[HARDCORE_THIS_REF] = true;\n    return (0, _babelHelperOptimiseCallExpression2.default)(callee, thisNode, args);\n  };\n\n  return ReplaceSupers;\n}();\n\nexports.default = ReplaceSupers;\nmodule.exports = exports[\"default\"];"]}