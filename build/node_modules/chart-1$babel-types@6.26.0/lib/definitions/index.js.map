{"version":3,"sources":["index.js"],"names":["exports","__esModule","DEPRECATED_KEYS","BUILDER_KEYS","NODE_FIELDS","ALIAS_KEYS","VISITOR_KEYS","undefined","_getIterator2","require","_getIterator3","_interopRequireDefault","_stringify","_stringify2","_typeof2","_typeof3","assertEach","assertOneOf","assertNodeType","assertNodeOrValueType","assertValueType","chain","default","defineType","_index","t","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","getType","val","Array","isArray","callback","validator","node","i","length","each","_len","arguments","vals","_key","validate","indexOf","TypeError","oneOf","_len2","types","_key2","valid","_iterator","_isArray","_i","_ref","next","done","value","type","is","oneOfNodeTypes","_len3","_key3","_iterator2","_isArray2","_i2","_ref2","oneOfNodeOrValueTypes","_len4","fns","_key4","_iterator3","_isArray3","_i3","_ref3","fn","apply","chainOf","opts","inherits","store","fields","visitor","aliases","builder","deprecatedAlias","_iterator4","concat","_isArray4","_i4","_ref4","_key5","field","optional"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.DEPRECATED_KEYS = exports.BUILDER_KEYS = exports.NODE_FIELDS = exports.ALIAS_KEYS = exports.VISITOR_KEYS = undefined;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nexports.assertEach = assertEach;\nexports.assertOneOf = assertOneOf;\nexports.assertNodeType = assertNodeType;\nexports.assertNodeOrValueType = assertNodeOrValueType;\nexports.assertValueType = assertValueType;\nexports.chain = chain;\nexports.default = defineType;\n\nvar _index = require(\"../index\");\n\nvar t = _interopRequireWildcard(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar VISITOR_KEYS = exports.VISITOR_KEYS = {};\nvar ALIAS_KEYS = exports.ALIAS_KEYS = {};\nvar NODE_FIELDS = exports.NODE_FIELDS = {};\nvar BUILDER_KEYS = exports.BUILDER_KEYS = {};\nvar DEPRECATED_KEYS = exports.DEPRECATED_KEYS = {};\n\nfunction getType(val) {\n  if (Array.isArray(val)) {\n    return \"array\";\n  } else if (val === null) {\n    return \"null\";\n  } else if (val === undefined) {\n    return \"undefined\";\n  } else {\n    return typeof val === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(val);\n  }\n}\n\nfunction assertEach(callback) {\n  function validator(node, key, val) {\n    if (!Array.isArray(val)) return;\n\n    for (var i = 0; i < val.length; i++) {\n      callback(node, key + \"[\" + i + \"]\", val[i]);\n    }\n  }\n  validator.each = callback;\n  return validator;\n}\n\nfunction assertOneOf() {\n  for (var _len = arguments.length, vals = Array(_len), _key = 0; _key < _len; _key++) {\n    vals[_key] = arguments[_key];\n  }\n\n  function validate(node, key, val) {\n    if (vals.indexOf(val) < 0) {\n      throw new TypeError(\"Property \" + key + \" expected value to be one of \" + (0, _stringify2.default)(vals) + \" but got \" + (0, _stringify2.default)(val));\n    }\n  }\n\n  validate.oneOf = vals;\n\n  return validate;\n}\n\nfunction assertNodeType() {\n  for (var _len2 = arguments.length, types = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    types[_key2] = arguments[_key2];\n  }\n\n  function validate(node, key, val) {\n    var valid = false;\n\n    for (var _iterator = types, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var type = _ref;\n\n      if (t.is(type, val)) {\n        valid = true;\n        break;\n      }\n    }\n\n    if (!valid) {\n      throw new TypeError(\"Property \" + key + \" of \" + node.type + \" expected node to be of a type \" + (0, _stringify2.default)(types) + \" \" + (\"but instead got \" + (0, _stringify2.default)(val && val.type)));\n    }\n  }\n\n  validate.oneOfNodeTypes = types;\n\n  return validate;\n}\n\nfunction assertNodeOrValueType() {\n  for (var _len3 = arguments.length, types = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    types[_key3] = arguments[_key3];\n  }\n\n  function validate(node, key, val) {\n    var valid = false;\n\n    for (var _iterator2 = types, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var type = _ref2;\n\n      if (getType(val) === type || t.is(type, val)) {\n        valid = true;\n        break;\n      }\n    }\n\n    if (!valid) {\n      throw new TypeError(\"Property \" + key + \" of \" + node.type + \" expected node to be of a type \" + (0, _stringify2.default)(types) + \" \" + (\"but instead got \" + (0, _stringify2.default)(val && val.type)));\n    }\n  }\n\n  validate.oneOfNodeOrValueTypes = types;\n\n  return validate;\n}\n\nfunction assertValueType(type) {\n  function validate(node, key, val) {\n    var valid = getType(val) === type;\n\n    if (!valid) {\n      throw new TypeError(\"Property \" + key + \" expected type of \" + type + \" but got \" + getType(val));\n    }\n  }\n\n  validate.type = type;\n\n  return validate;\n}\n\nfunction chain() {\n  for (var _len4 = arguments.length, fns = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    fns[_key4] = arguments[_key4];\n  }\n\n  function validate() {\n    for (var _iterator3 = fns, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var fn = _ref3;\n\n      fn.apply(undefined, arguments);\n    }\n  }\n  validate.chainOf = fns;\n  return validate;\n}\n\nfunction defineType(type) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var inherits = opts.inherits && store[opts.inherits] || {};\n\n  opts.fields = opts.fields || inherits.fields || {};\n  opts.visitor = opts.visitor || inherits.visitor || [];\n  opts.aliases = opts.aliases || inherits.aliases || [];\n  opts.builder = opts.builder || inherits.builder || opts.visitor || [];\n\n  if (opts.deprecatedAlias) {\n    DEPRECATED_KEYS[opts.deprecatedAlias] = type;\n  }\n\n  for (var _iterator4 = opts.visitor.concat(opts.builder), _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : (0, _getIterator3.default)(_iterator4);;) {\n    var _ref4;\n\n    if (_isArray4) {\n      if (_i4 >= _iterator4.length) break;\n      _ref4 = _iterator4[_i4++];\n    } else {\n      _i4 = _iterator4.next();\n      if (_i4.done) break;\n      _ref4 = _i4.value;\n    }\n\n    var _key5 = _ref4;\n\n    opts.fields[_key5] = opts.fields[_key5] || {};\n  }\n\n  for (var key in opts.fields) {\n    var field = opts.fields[key];\n\n    if (opts.builder.indexOf(key) === -1) {\n      field.optional = true;\n    }\n    if (field.default === undefined) {\n      field.default = null;\n    } else if (!field.validate) {\n      field.validate = assertValueType(getType(field.default));\n    }\n  }\n\n  VISITOR_KEYS[type] = opts.visitor;\n  BUILDER_KEYS[type] = opts.builder;\n  NODE_FIELDS[type] = opts.fields;\n  ALIAS_KEYS[type] = opts.aliases;\n\n  store[type] = opts;\n}\n\nvar store = {};"]}