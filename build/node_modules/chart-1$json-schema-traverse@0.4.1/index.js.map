{"version":3,"sources":["index.js"],"names":["traverse","module","exports","schema","opts","cb","pre","post","_traverse","keywords","additionalItems","items","contains","additionalProperties","propertyNames","not","arrayKeywords","allOf","anyOf","oneOf","propsKeywords","definitions","properties","patternProperties","dependencies","skipKeywords","default","enum","const","required","maximum","minimum","exclusiveMaximum","exclusiveMinimum","multipleOf","maxLength","minLength","pattern","format","maxItems","minItems","uniqueItems","maxProperties","minProperties","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","parentSchema","keyIndex","Array","isArray","key","sch","i","length","prop","escapeJsonPtr","allKeys","str","replace"],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n"]}