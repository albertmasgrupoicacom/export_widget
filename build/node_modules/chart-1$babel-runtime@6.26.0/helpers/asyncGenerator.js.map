{"version":3,"sources":["asyncGenerator.js"],"names":["exports","__esModule","_symbol","require","_symbol2","_interopRequireDefault","_promise","_promise2","obj","default","AwaitValue","value","AsyncGenerator","gen","front","back","resume","key","arg","result","resolve","then","settle","done","err","type","reject","next","_invoke","send","request","return","undefined","asyncIterator","prototype","throw","wrap","fn","apply","arguments","await","_await"],"mappings":"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","file":"asyncGenerator.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _promise = require(\"../core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new _promise2.default(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          _promise2.default.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof _symbol2.default === \"function\" && _symbol2.default.asyncIterator) {\n    AsyncGenerator.prototype[_symbol2.default.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function wrap(fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function _await(value) {\n      return new AwaitValue(value);\n    }\n  };\n}();"]}